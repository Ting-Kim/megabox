










<!doctype html>
<!--[if lt IE 10]><html class="lt-ie9" lang="ko"><![endif]-->
<!--[if gt IE 9]><!--><html lang="ko"><!--<![endif]-->

<!-- Mirrored from www.megabox.co.kr/booking/privatebooking by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 07 Jul 2020 06:34:30 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
	<link rel="shortcut icon" href="../static/pc/images/favicon.ico" />

    
	




		<title>더 부티크 프라이빗 < 예매  | 라이프씨어터, 메가박스</title>
		<meta property="name"			id="metaTagTitle"	content="더 부티크 프라이빗 &lt; 예매 "/>
		<meta property="description"	id="metaTagDtls"	content="더욱쉬은 메가박스 예매! 영화를 예매하는 방법을 친절히 안내해드립니다."/>
		<meta property="keywords"		id="metaTagKeyword"	content="메가박스,megabox,영화,영화관,극장,티켓,박스오피스,상영예정작,예매,오페라,싱어롱,큐레이션,필름소사이어티,클래식소사이어티,이벤트,Movie,theater,Cinema,film,Megabox"/>

		<meta property="fb:app_id" 		id="fbAppId" 	content="546913502790694"/>
		

		<meta property="og:site_name" 	id="fbSiteName"	content="메가박스"/>
		<meta property="og:type" 		id="fbType"		content="movie"/>
		<meta property="og:url" 		id="fbUrl"		content="privatebooking.html" />
		<meta property="og:title" 		id="fbTitle"	content="더 부티크 프라이빗 &lt; 예매 " />
		<meta property="og:description"	id="fbDtls"		content="더욱쉬은 메가박스 예매! 영화를 예매하는 방법을 친절히 안내해드립니다."/>
		<meta property="og:image" 		id="fbImg"		content="../../img.megabox.co.kr/SharedImg/metaTag/2020/02/04/gFfTzMwwiCxhBwcUV5TRGMFX9Cmoj64W.jpg" />
		


	
	
     	
     		<link rel="stylesheet" href="../static/pc/dist/megabox.min.css" media="all" />
     		<!-- Global site tag (gtag.js) - Google Analytics -->
			<script async src="https://www.googletagmanager.com/gtag/js?id=UA-30006739-3"></script>
			<script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-30006739-3');</script>
		    <script src="../static/pc/dist/megabox.api.min.js"></script>
			<script src="../static/mb/js/lozad.min.js"></script>
			<script src="../js/common/dist/megabox.common.min.js"></script>
     		<script src="../js/netfunnel/dist/megabox.netfunnel.min.js"></script>
			<script src="../../cast.imp.joins.com/persona.js" async></script>
		
		
	

    <script type="text/javascript">

  		
  		var reset = ''

  		if( reset == 'Y' || location.pathname == '/booking' ){
  			history.replaceState('','',location.href);
  		}

        var _init = {
            cache	: Date.now(),
            path	: '/static/pc/js/'
        };

        document.write(
            '<script src="'+_init.path+'ui.common.js?v='+_init.cache+'"><\/script>'+
            '<script src="'+_init.path+'front.js?v='+_init.cache+'"><\/script>'
        );

        //RedirectException 발생시 메시지 처리
        

        //링크 구분에 따라 url 이동을 한다.
        function fn_goMoveLink(link_gbn, link_url) {
            alert("준비중 입니다");
            return;
        }
    </script>
</head>

<body>

    <div class="skip" title="스킵 네비게이션">
        <a href="#contents" title="본문 바로가기">본문 바로가기</a>
        <a href="#footer" title="푸터 바로가기">푸터 바로가기</a>
    </div>

    <div class="body-wrap">

       







<!--  ko_KR -->
        
<!-- <script async defer src="https://connect.facebook.net/en_US/sdk.js"></script>
<script type="text/javascript" src="https://static.nid.naver.com/js/naveridlogin_js_sdk_2.0.0.js" charset="utf-8"></script> -->
<script src="../static/mb/js/hmac-sha256.js"></script>
<script src="../static/mb/js/enc-base64-min.js"></script>
<script type="text/javascript">
/*전역변수
아이디
패스워드  입력 완료 체크 변수 필요
*/
var sValidateLoginIdAt  = 'N';	//로그인ID  입력 검증 여부
var sValidateLoginPwdAt = 'N';	//로그인PWD 입력 검증 여부
var submitIng = false;
var sCookieVal = "";	//쿠키값
/*
window.fbAsyncInit = function() {
	FB.init({
    	appId            : '',
      	autoLogAppEvents : true,
      	xfbml            : true,
      	version          : ''
   });
};

var naverLogin = new naver.LoginWithNaverId({
	clientId: '',
	callbackUrl: location.href,
	isPopup: false,
	callbackHandle: false
	// callback 페이지가 분리되었을 경우에 callback 페이지에서는 callback처리를 해줄수 있도록 설정합니다.
});
*/

$(function(){
	/*로그인 버튼 비활성*/
	$("#btnLogin").attr("disabled", true);

	/*쿠키조회 pc 아이디값 입력 및 자동로그인 체크*/
	sCookieVal = fn_getCookie('loginId');
	if (!(sCookieVal == null || sCookieVal == "")){
		$("#ibxLoginId").val(sCookieVal);
		$("input:checkbox[id='chkIdSave']").prop("checked",true);
		fn_validateInputVal("loginId",sCookieVal);
	}

	/*이벤트*/
	/*로그인*/
	$("#btnLogin").click(function(){
		var sLoginId   = $("#ibxLoginId").val();
		var sLloginPwd = $("#ibxLoginPwd").val();

// 		//아이디 생성규칙 확인
// 		if(!fn_validateInputVal("loginId" ,$("#ibxLoginId").val(), 'Y')) {
// 			$("#ibxLoginId").focus();
// 			return;
// 		}
// 		//패스워드 생성규칙확인
// 		if(!fn_validateInputVal("loginPwd",$("#ibxLoginPwd").val(), 'Y')) {
// 			$("#ibxLoginPwd").focus();
// 			return;
// 		}

		$('#error-text').text('');

		//아이디 저장 버튼 체크시 쿠키 설정
		if($("input:checkbox[id='chkIdSave']").is(":checked")){
			fn_setCookie('loginId',$("#ibxLoginId").val(),730);
		}
		//아이디 저장 체크 안했을때 쿠키 삭제
		else if(!$("input:checkbox[id='chkIdSave']").is(":checked")){
			fn_deleteCookie('loginId');
		}

		fn_selectMbLogin(sLoginId, sLloginPwd);	//로그인
	});

	/*아이디 입력시 체크 */
	$("#ibxLoginId").on("keyup", function(e){
		if(fn_validateInputVal("loginId", $(this).val())){
			if(e.keyCode == 13){$("#btnLogin").click();}
		} else {
			if(e.keyCode == 13){$("#ibxLoginPwd").focus();}
		}

		return;
	});

	/*비밀번호 입력체크 */
	$("#ibxLoginPwd").on("keyup", function(e){
		if(fn_validateInputVal("loginPwd", $(this).val())){
			if(e.keyCode == 13){$("#btnLogin").click();}
		}
		return;
	});


	// 페이스북 로그인
	$('.login-facebook').on('click', function(e) {
		e.preventDefault();

		var type = $(this).data('type');

		FB.login(function(response){
			if(response.authResponse.userID) {
				$.ajaxMegaBox({
					url: '/on/oh/ohg/MbLogin/selectMbSimpleLogin.rest',
					data: JSON.stringify({ simpleLoginId: response.authResponse.userID, type: type }),
					success: function (data) {
						if(data.result) {
							AppHandler.Common.goMain();  // 메인페이지로 이동
						} else {
							AppHandler.Common.alert('본 서비스는 메가박스 회원인 경우에만  이용하실 수 있습니다.\n회원가입 후 이용 부탁 드립니다.');
						}
					}
				});
			}
		});
	});
});

//쿠키설정
function fn_setCookie(cname, cvalue, exdays) {
	var d = new Date();
	d.setTime(d.getTime() + (exdays*24*60*60*1000));
	var expires = "expires="+d.toUTCString();
	document.cookie = cname + "=" + cvalue + "; " + expires + ";path=/";
}

//쿠키조회
function fn_getCookie(name) {
	var value = document.cookie.match('(^|;) ?' + name + '=([^;]*)(;|$)');
	return value? value[2] : null;

}

//쿠키삭제
function fn_deleteCookie(name){
	var d = new Date();
	d.setTime(d.getDate() -1);
	var expires = "expires="+d.toUTCString();
	document.cookie = name + "=;" + expires + ";path=/";
}


//입력 문자 체크
function fn_validateInputVal(type,sVal,submitAt){
	if(type == "loginId") {		  //아이디

		if(sVal == ""){
			sValidateLoginIdAt = 'N';
		}
// 		if (!/((?=.{8,})(?=.*[0-9])(?=.*[a-zA-Z]).*$)/g.test(sVal)) {
// 			$('#error-text').text('아이디는 영문,숫자 조합 8자리 이상 12자리 이하 입니다.');
// 			sValidateLoginIdAt = 'N';
// 		}
// 		else if (/((?=.{8,})(?=.*[~!@#$%^&*+=-]).*$)/g.test(sVal)) {
// 			$('#error-text').text('아이디는 영문,숫자 조합 8자리 이상 12자리 이하 입니다.');
// 			sValidateLoginIdAt = 'N';
// 		}
		else{
			$('#error-text').text('');
			sValidateLoginIdAt = 'Y';
		}
	}
	else if(type == "loginPwd") { //패스워드
		if(sVal == ""){
			sValidateLoginPwdAt = 'N';
		}
// 		if (!/((?=.{10,})(?=.*[0-9])(?=.*[a-zA-Z]).*$)|((?=.{10,})(?=.*[~!@#$%^&*+=-])(?=.*[a-zA-Z]).*$)|((?=.{10,})(?=.*[!@#$%^&*+=-])(?=.*[0-9]).*$)/g.test(sVal)) {
// 			$('#error-text').text('비밀번호는 영문,숫자,특수기호 중 2가지 이상 조합하여 10자리 이상 16자리 이하 입니다.');
// 			sValidateLoginPwdAt = 'N';
// 		}
		else {
			$('#error-text').text('');
			sValidateLoginPwdAt = 'Y';
		}
	}

	if(submitAt != 'Y'){
		if(sValidateLoginIdAt == 'Y' && sValidateLoginPwdAt =='Y') {
			$("#btnLogin").attr("disabled", false);	//버튼활성화
		}
		else {
			$("#btnLogin").attr("disabled", true);	//버튼비활성화
		}
	}

	if(sValidateLoginIdAt == 'N' || sValidateLoginPwdAt =='N') {
		return false;
	}

	return true;
}


//패스워드 3개월 초과시 다음에 하기 버튼 누를경우 비밀번호 변경일자 오늘날자로 셋팅
//비번 재설정은 3개월 미변경시, 변경 안하면 로그인 할때마다 alert 나옴 20190507
function fn_updatePwdUptDt(sLoginId){
	var paramData = { loginId:sLoginId };
	$.ajaxMegaBox({
		url: "/on/oh/ohg/MbLogin/updateMbPwdReSet.rest",
		type: "POST",
		contentType: "application/json;charset=UTF-8",
		dataType: "json",
		data: JSON.stringify(paramData),
		success: function (data, textStatus, jqXHR) {
			//메인 화면으로 이동
			$(location).attr('href','/main');
		},
		error: function(xhr,status,error){
			var err = JSON.parse(xhr.responseText);
			alert(xhr.status);
			alert(err.message);
		}
	});
}

//로그인
function fn_selectMbLogin(sLoginId, sLloginPwd, snsLoginAt, redisKey){

	if(submitIng) return;

	/* 폼데이터 초기화 */
	$('#loginForm input[name=certType]').val();								//본인인증 모듈 코드값 초기화
	var sMenuId = $('input[name=menuId]').val();							//호출화면id
	var sMappingId = $('input[name=mappingId]').val();						//리턴URL
	var sSnsLogin = typeof snsLoginAt == 'undefined' ? "N" : snsLoginAt;	//sns로그인 여부

	var validLoginId  = sLoginId != null ? sLoginId.replace(/ /gi,"") : "";
	var validLoginPwd = sLloginPwd != null ? sLloginPwd.replace(/ /gi,"") : "";

	if(validLoginPwd != "simpleLogin"){
		if(validLoginId == "" || validLoginPwd == ""){
			gfn_alertMsgBoxSize('로그인 정보를 입력해 주세요.',400,250);	//로그인 정보를 입력해 주세요.
			return;
		}
	}

	var paramData = { loginId:sLoginId
					, loginPwd:sLloginPwd
					, menuId:sMenuId
					, mappingId:sMappingId
					, snsLogin:sSnsLogin
					, redisKey:redisKey
					};

	$.ajaxMegaBox({
		url: "/on/oh/ohg/MbLogin/selectMbLoginInfo.rest",
		data: JSON.stringify(paramData),
		//async: false,
		success: function (data, textStatus, jqXHR) {
			var revStr                 = data.revStr;
			var redisKey               = data.redisKey;
			var pwdErrCnt              = data.pwdErrCnt+1;
			var loginPwdLstUptDt       = data.loginPwdLstUptDt;
			var pwdUptDayco            = data.pwdUptDayco;
			var menuId                 = data.menuId;
			var mappingId              = data.mappingId;
			var marketRcvStr           = data.marketRcvStr
			var loginIdStar            = data.loginIdStar;

			//비밀번호 5회 오류	//본인인증 수단 선택 M-ME-DA-01
			if (revStr == "acctLock") {
				$('#loginForm input[name=redisKey]').attr('value',redisKey);
				$('#loginForm input[name=certType]').attr('value','SCRC05');
				var options = {};
				options.msg = '로그인정보가 5회 이상 잘못 입력되었습니다.\n회원인증 후 새로운 비밀번호를 설정해 주세요.';	//비밀번호 5회 이상 잘못 입력되었습니다.\n본인인증 후 새로운 비밀번호를 설정해 주세요.
				options.callback  = fn_mvPage;
				options.param = {confirm:'/on/oh/ohg/MbLogin/viewMbSimpleCertPage.rest'};	//간편인증페이지
				options.minWidth  = 400;
				options.minHeight = 250;
				gfn_alertMsgBox(options);
				return;
			}
			//비밀번호 변경9개월 초과 //비밀번호 재설정 M-ME-FI-04	비밀번호변경 9개월 체크 하지 않음. 무조건 3개월 연장
// 			else if (revStr == "loginPwdUpt9mm") {
// 				$('input[name=loginId]').attr('value',loginId);
// // 				mbLayer.toggle({id:revStr, msg:'회원님의 개인정보 보호를 위해 3개월마다 비밀번호 변경 안내해드리고 있습니다.\n마지막 변경일 : '+loginPwdLstUptDt+'('+pwdUptDayco+'일전)', btn:'비밀번호 변경', callback:fn_mvPage, param:'/pw-register', minHeight:200, type:'single' });
// 				var options      = {};
// 				options.msg      = '회원님의 개인정보 보호를 위해 3개월마다 비밀번호 변경 안내해드리고 있습니다.\n마지막 변경일 : '+loginPwdLstUptDt+'('+pwdUptDayco+'일전)';
// 				options.okBtnTxt = "비밀번호 변경";
// 				options.callback = fn_mvPage;
// 				options.param    = {confirm:'/pw-register'};
// 				options.minWidth  = 400;
// 				options.minHeight = 250;
// 				gfn_alertMsgBox(options);
// 				return;
// 			}
			//비밀번호 변경3개월 초과	//다음에하기, 비밀번호 재설정 M-ME-FI-04
			else if (revStr == "loginPwdUpt3mm") {
				$('#loginForm input[name=redisKey]').attr('value',redisKey);
				var options = {};
				options.msg        = '회원님의 개인정보 보호를 위해 3개월마다 비밀번호 변경안내를 시행하고 있습니다.\n안전한 서비스 이용을 위해 비밀번호 변경 후 이용바랍니다.\n지금 변경 하시겠습니까?\n\n마지막 변경일 : '+loginPwdLstUptDt+'('+pwdUptDayco+'일전)';
				options.confirmFn  = fn_mvPage;
				options.cancelFn   = fn_loginSuccessEvent;
				options.okBtnTxt     = "비밀번호 재설정";
			    options.cancelBtnTxt = "다음에 하기";
			    options.minWidth  = 400;
				options.minHeight = 300;
				options.param      = {confirm:"/pw-register" };
				gfn_confirmMsgBox(options);
				return;
// 				if(confirm('회원님의 개인정보 보호를 위해 3개월마다 비밀번호 변경안내를 시행하고 있습니다.\n안전한 서비스 이용을 위해 비밀번호 변경 후 이용바랍니다.\n지금 변경 하시겠습니까?\n\n마지막 변경일 : '+loginPwdLstUptDt+'('+pwdUptDayco+'일전)')){
// 					$('input[name=loginId]').attr('value',loginId);
// 					fn_mvPage('/pw-register');
// 					return;
// 				}
// 				else {
// 					fn_mvPage("/main");	//메인페이지로 이동
// 					return;
// 				}
			}
			//마케팅 수신일 2년 초과	//todo 다음에하기, 수신동의 설정 내정보 수정화면 개발후연결
			else if (revStr == "marketRcv") {
				var options        = {};
				options.msg        = '마케팅 수신 동의일로부터 2년이 경과되어, 수신에 대한 재동의 안내를 시행하고 있습니다. \n메가박스의 다양한 소식 및 이벤트를 받고 싶으시면 수신동의 재설정이 필요합니다.  \n수신동의 재설정을 진행 하시겠습니까?\n\n[수신동의 정보]\n'+marketRcvStr+'';
				//options.msg        = '마케팅 수신 동의일로부터 2년이 경과되어, 수신에 대한 재동의 안내를 시행하고 있습니다. \n메가박스의 다양한 소식 및 이벤트를 받고 싶으시면 수신동의 재설정이 필요합니다.  \n수신동의 재설정을 진행 하시겠습니까?\n\n[수신동의 정보]\n&#39;+lstSmsRcvAgreeDt+&#39;'.replaceAll('\n','<br/>');
				options.confirmFn  = fn_mvPage;
				options.cancelFn   = fn_loginSuccessEvent;
				options.okBtnTxt     = "수신동의 설정";
			    options.cancelBtnTxt = "다음에 하기";
				options.param      = {confirm:"/on/oh/ohh/Mypage/userAdditInfoPage.do?marketRcvReAgree=Y"};
				options.minWidth  = 400;
				options.minHeight = 300;
				gfn_confirmMsgBox(options);
				return;
			}
			//관리자에의한 패스워드 초기화 //비밀번호 재설정 M-ME-FI-04	관리자에 의한 패스워드 초기화는 없다.
// 			else if (revStr == "loginPwdReset") {
// // 				mbLayer.toggle({id:revStr, msg:'비밀번호 재설정이 완료되었습니다. 다시 로그인해 주시기 바랍니다.', btn:'확인', callback:fn_mvPage, param:'/pw-register', minHeight:200, type:'single' });
// 				var options = {};
// 				options.msg = '비밀번호 재설정이 완료되었습니다. 다시 로그인해 주시기 바랍니다.';
// 				options.callback  = fn_mvPage;
// 				options.param = {confirm:'/pw-register'};
// 				options.minWidth  = 400;
// 				options.minHeight = 250;
// 				gfn_alertMsgBox(options);
// 				return;
// 			}
			//휴면계정복구 안내	//TODO 다음에하기, 휴면계정복구 본인인증 수단 선택 M-ME-DA-01
			else if (revStr == "mbSchIdGuideDormAcct") {
				$('#loginForm input[name=certType]').attr('value','SCRC03');
				$('#loginForm input[name=redisKey]').attr('value',redisKey);
				var options = {};
				options.msg        = '회원님의 아이디는 ['+loginIdStar+'] 메가박스 온라인 서비스를 1년이상 이용하지 않아 휴면계정으로 전환되었습니다. 휴면계정 복구 후 서비스 이용이 가능합니다.\n휴면계정 복구를 진행하시겠습니까?';
				options.okBtnTxt = "휴면계정복구";
				options.callback = fn_mvPage;
				options.param    = {confirm:"/member-check"};
				options.minWidth  = 400;
				options.minHeight = 300;
				gfn_alertMsgBox(options);
				return;
			}
			//탈퇴회원안내
			else if (revStr == "quitMb") {
				gfn_alertMsgBoxSize('회원탈퇴 후 1개월 이내 재가입할 수 없습니다.\n메가박스 고객센터로 문의해 주세요',400,250);	//회원탈퇴 후 1개월 이내 재가입할 수 없습니다. 메가박스 고객센터로 문의해 주세요
				return;
			}
			//loginPwdFail 패스워드실패안내, mbJoinReq 회원가입안내, mbInfoSearchUnable 탈퇴회원안내
			else if (revStr == "loginPwdFail" || revStr == "mbJoinReq" || revStr == "mbInfoSearchUnable") {
// 				$('.alert').text('로그인 정보가 잘못되었습니다. (로그인 '+pwdErrCnt+'/5회 실패)');	2020-02-06 메가박스 차세대 이행/안정화 결함대장 28번
				$("#ibxLoginId").val("");
				$("#ibxLoginPwd").val("");
				gfn_alertMsgBoxSize('아이디 또는 비밀번호가 맞지 않습니다.\n로그인 정보를 다시 확인바랍니다.',400,250);	//msg.ch.ohg.ME031=아이디 또는 비밀번호가 맞지 않습니다.\\n로그인 정보를 다시 확인바랍니다.
				$("#btnLogin").attr("disabled", true);	//버튼비활성화
				sValidateLoginPwdAt ='N';
				return;
			}

		    if(typeof loginPopupCallScn === "undefined"){
		    	loginPopupCallScn = "";
		    }
// 		    console.log("this : "+loginPopupCallScn);
			//화면이동
			if(menuId != "" && menuId != null){  //화면으로 띄웠을떄
				fn_mvPage(mappingId);
				return;
			}
			else {

				fn_loginSuccessEvent();

			}
			return;
		},
		error: function(xhr,status,error){
			 var err = JSON.parse(xhr.responseText);
			 alert(xhr.status);
			 alert(err.message);
		},
		beforeSend: function() {
			submitIng = true;
		},
		complete: function() {
			submitIng = false;
		}
	});

	function fn_loginSuccessEvent(){

		var bokdLoginAt = $('#loginForm input[name=bokdLoginAt]').val();
		var reloadYn = $('#loginForm input[name=reloadYn]').val();
		var validDataRevisnYn = $('#loginForm input[name=validDataRevisnYn]').val();				//데이터 보정 여부

		if(bokdLoginAt == "Y"){
			//예매로그인일경우
			//오입력값을 체크한다.
			$('.before').hide();
			$('.after').show();
			$('.after .notice').show();
			$('#layer_login_select button.btn-modal-close').trigger("click");
			fn_validDataRevisn(JSON.parse($('#loginForm input[name=bokdLoginParam]').val()));
		}
		else {
			if (reloadYn == "N") {

				$('.before').hide();
				$('.after').show();
				$('.after .notice').show();
				$('#layer_login_select button.btn-modal-close').trigger("click");
				if(validDataRevisnYn == "Y"){
					fn_validDataRevisn();
				}
			} else {

				//화면 리로드
				//location.reload();
				//post submit시 브라우저 경고창 관련
				window.document.location.href = window.document.URL;


				////////////////////////////////////////////
				// TODO 빵원쿠폰일 경우에만 처리되도록 수정 //
                ////////////////////////////////////////////
                $(".btn-modal-close").click();
                ////////////////////////////////////////////
                ////////////////////////////////////////////
			}
		}
	}

	//페이지 이동 submit
	function fn_mvPage(page){
// 		console.log("MbLoginScriptDV.fn_mvPage : "+page);

		var rtnParam = $("#loginForm [name=rtnParam]").val();

		if (rtnParam.trim() != ""){

			var arr;
			var html = '<input type="hidden" name="#1" value="#2" />';

			$.each(rtnParam.split(','), function(i, val){

				arr = val.split(':');
				arr[0] = arr[0].trim();
				arr[1] = arr[1].trim();
				arr[2] = '[name='+arr[0]+']';

				if ($("#loginForm").find(arr[2]).length > 0) {
					$("#loginForm").find(arr[2]).val(arr[1]);
				} else {
					$("#loginForm").append(html.replace('#1', arr[0]).replace('#2', arr[1]));
				}
			});
		}

		$("#loginForm").attr("method","post");
		$("#loginForm").attr("action",page);
		$("#loginForm input[name=preUrl]").val(document.location.pathname)
		$("#loginForm").submit();
	}
}
/* 비회원 */
var sValidateNonMbNmAt               = "N";
var sValidateNonMbByymmddAt          = "N";
var sValidateNonMbTelnoAt            = "N";

var sValidateMblpCharCertNo          = "N";

var sValidateNonMbPwdAt              = "N";
var sValidateNonMbPwdConfirmAt       = "N";
var sValidateNonMbPwdEqualAt         = "N";
var sValidateNonMbBokdPersonInfoProc = "N";
var sValidateMblpCertNoSuccess      = "N";

var AuthTimer;
var bokdCnfmAt                       = "N";

//이벤트
$(function(){
	if(typeof $("#ibxNonMbPwdConfirm").val() == 'undefined'){
		bokdCnfmAt = "Y";
	}
	fn_validateNonMbInputVal();
	/*비회원 로그인 버튼 비활성화*/
	$("#btnMbLogin").attr("disabled", true);

	/*비회원 정보 확인 버튼 비활성화*/
	$("#btnChkNonMbLogin").attr("disabled", true);
	$("#btnNonMbLogin").attr("disabled", true);

	/* 이름 숫자를 제외한 입력 여부판단 */
	$("#ibxNonMbNm").on("keyup", function(e){
		var partton = /[^ㄱ-힣a-zA-Z]/g;
		if(partton.test($(this).val())) {
			var value = $(this).val().replace(/[^ㄱ-힣a-zA-Z]/g,"");
			$(this).val(value);
		}
		if(fn_validateNonMbInputVal()){
			if(e.keyCode == 13) {$("#btnChkNonMbLogin").click();}
		} else {
			if(e.keyCode == 13) {$("#ibxNonMbByymmdd").focus()};
		}
	});
	$("#ibxNonMbNm").focusout(function(){
		var partton = /[^ㄱ-힣a-zA-Z]/g;
		if(partton.test($(this).val())) {
			var value = $(this).val().replace(/[^ㄱ-힣a-zA-Z]/g,"");
			$(this).val(value);
		}
		fn_validateNonMbInputVal();
	});

	/* 생년월일 숫자만 입력 여부판단 */
	$("#ibxNonMbByymmdd").on("keyup", function(e){
		$(this).val($(this).val().replace(/[^0-9]/g,""));
		if(fn_validateNonMbInputVal()){
			if(e.keyCode == 13) {$("#btnChkNonMbLogin").click();}
		} else {
			if(e.keyCode == 13) {$("#ibxNonMbTelno").focus();}
		}
	});
	$("#ibxNonMbByymmdd").focusout(function(){
		$(this).val($(this).val().replace(/[^0-9]/g,""));
		fn_validateNonMbInputVal();
	});

	/* 휴대폰번호 숫자만 입력 여부판단 */
	$("#ibxNonMbTelno").on("keyup", function(e){
		$(this).val($(this).val().replace(/[^0-9]/g,""));

		//휴대폰 번호
		if($("#ibxNonMbTelno").val() != "") {
			var frontNm = $("#ibxNonMbTelno").val().substr(0,2);
			if(frontNm != '01'){
				$('#mblpInput-error-text').text('휴대폰번호를 정확히 입력해주세요.');
				ibxNonMbTelno = 'N';
				return false;
			}
			else if($("#ibxNonMbTelno").val().length < 10){
				$('#mblpInput-error-text').text('휴대폰번호를 정확히 입력해주세요.');
				sValidateNonMbTelnoAt = 'N';
				return false;
			}
			else {
				sValidateNonMbTelnoAt = 'Y';
				$('#mblpInput-error-text').text('');
			}
		}
		else {
			sValidateNonMbTelnoAt = 'N';
		}

		//console.log("sValidateNonMbTelnoAt", sValidateNonMbTelnoAt);
		//console.log("sValidateMblpCertNoSuccess", sValidateMblpCertNoSuccess);

		//인증번호 전송 버튼 활성화
		if( sValidateNonMbTelnoAt   == 'Y' && sValidateMblpCertNoSuccess == 'N') {
			$("#nonMbCertNoSend").attr("disabled", false);
			$("#nonMbCertNoSend").removeClass("disabled");
			if(window.fn_validateJoinInfoRegInputVal) {
				//sValidateMblpCertNoSuccess = "Y";
				fn_validateJoinInfoRegInputVal();
			}
		}
		else{
			$("#nonMbCertNoSend").attr("disabled", true);
			$("#nonMbCertNoSend").addClass("disabled");
			if(window.fn_validateJoinInfoRegInputVal) {
				//sValidateMblpCertNoSuccess = "N";
				fn_validateJoinInfoRegInputVal();
			}
		}

		if(e.keyCode != 9){
			if(typeof AuthTimer != 'undefined'){
				AuthTimer.fnStop();
				$('#timer').html("3:00");
				$('#nonMbCertNoSend').html("인증요청");
				sValidateMblpCertNoSuccess = "N";
				$('#nonMbCertRow').show();
				$('#mblpCharCertNo').val("");
				$("#nonMbCertNoSend").removeClass("disabled");
				$("#nonMbCertNoSend").attr("disabled", false);
				$("#btnMblpCharCert").attr("disabled", true);
				$("#btnMblpCharCert").addClass("disabled");
				if(fn_validateNonMbInputVal()){
					if(e.keyCode == 13) {$("#btnChkNonMbLogin").click();}
				} else {
					if(e.keyCode == 13) {$("#nonMbCertNoSend").click();}
				}
			}
			else {
				if(fn_validateNonMbInputVal()){
					if(e.keyCode == 13) {$("#btnChkNonMbLogin").click();}
				} else {
					if(e.keyCode == 13) {$("#ibxNonMbPwd").focus();}
				}
			}
		}
	});
	$("#ibxNonMbTelno").focusout(function(){
		$(this).val($(this).val().replace(/[^0-9]/g,""));
		fn_validateNonMbInputVal();
	});

	/* 인증번호 숫자만 입력 여부 판단*/
	$("#mblpCharCertNo").on("keyup", function(e){
		$(this).val($(this).val().replace(/[^0-9]/g,""));

		if($("#mblpCharCertNo").val().length >= 4) {
			$("#btnMblpCharCert").removeClass("disabled");
			$("#btnMblpCharCert").attr("disabled", false);
		}
		else {
			$("#btnMblpCharCert").attr("disabled", true);
			$("#btnMblpCharCert").addClass("disabled");
		}

		if(e.keyCode == 13) {$("#btnMblpCharCert").click();}
	});
	$("#mblpCharCertNo").focusout(function(){
		$(this).val($(this).val().replace(/[^0-9]/g,""));
		if($("#mblpCharCertNo").val().length >= 4) {
			$("#btnMblpCharCert").removeClass("disabled");
			$("#btnMblpCharCert").attr("disabled", false);
		}
		else {
			$("#btnMblpCharCert").attr("disabled", true);
			$("#btnMblpCharCert").addClass("disabled");
		}
	});

	/* 비밀번호 숫자만 입력 여부판단 */
	$("#ibxNonMbPwd").on("keyup", function(e){
		$(this).val($(this).val().replace(/[^0-9]/g,""));
		if(fn_validateNonMbInputVal()){
			if(e.keyCode == 13) {$("#btnChkNonMbLogin").click();}
		} else {
			if(e.keyCode == 13) {$("#ibxNonMbPwdConfirm").focus();}
		}
	});
	$("#ibxNonMbPwd").focusout(function(){
		$(this).val($(this).val().replace(/[^0-9]/g,""));
		fn_validateNonMbInputVal();
	});

	/* 비밀번호 확인 숫자만 입력 여부판단 */
	$("#ibxNonMbPwdConfirm").on("keyup", function(e){
		$(this).val($(this).val().replace(/[^0-9]/g,""));
		if(fn_validateNonMbInputVal()) {
			if(e.keyCode == 13) {$("#btnChkNonMbLogin").click();}
		}
	});
	$("#ibxNonMbPwdConfirm").focusout(function(){
		$(this).val($(this).val().replace(/[^0-9]/g,""));
		fn_validateNonMbInputVal();
	});

	//체크박스 변경여부
	$("#chkNonMbBokdPersonInfoProcTrue").change(function() {
		if($('#chkNonMbBokdPersonInfoProcTrue').is(":checked")) {
			fn_validateNonMbInputVal();
		}
		else {
			fn_validateNonMbInputVal();
		}
	});

	$("#chkNonMbBokdPersonInfoProcFalse").change(function() {
		if($('#chkNonMbBokdPersonInfoProcFalse').is(":checked")) {
			fn_validateNonMbInputVal();
		}
		else {
			fn_validateNonMbInputVal();
		}
	});

	/*이벤트*/
	/* 인증번호 전송 버튼 클릭*/
	$("#nonMbCertNoSend").click(function(){
		if($("#nonMbCertNoSend").hasClass("disabled")){
			return;
		}

		var sRedisKey     = $('#loginForm input[name=nonMbCertRedisKey]').val();
		var sNonMbTelno   = $('#ibxNonMbTelno').val();
		var paramData = { redisKey : sRedisKey
						, nonMbTelno : sNonMbTelno
						};

		$('#nonMbCert-error-text').text('');

		$.ajaxMegaBox({
			url: "/on/oh/ohg/MbLogin/selectNonMbCertNoSend.rest",
			type: "POST",
			contentType: "application/json;charset=UTF-8",
			dataType: "json",
			data: JSON.stringify(paramData),
			success: function (data, textStatus, jqXHR) {
				$('input[name=nonMbCertRedisKey]').attr('value',data.resultMap.redisKey);

				if(data.resultMap.successAt == "N"){
					//비회원로그인-예매
					var bokdLoginAt = $('#loginForm input[name=bokdLoginAt]').val();
    				if(bokdLoginAt == "Y"){
    					//예매로그인일경우
    					//인증시간이 만료된 경우
    					if(data.resultMap.msg == "ME061"){
    						gfn_alertMsgBoxSize('인증시간이 만료되었습니다. 인증번호를 재전송 후 입력바랍니다.', 400, 250);	//인증시간이 만료되었습니다. 인증번호를 재전송 후 입력바랍니다.
    					}
    					//동일번호로 3회 이상 요청하는경우
    					else if(data.resultMap.msg == "ME062"){
    						//오입력값을 체크한다.
        					$('.before').hide();
            				$('.after').show();
            				$('#btnNonMbModalClose').trigger("click");
        					$('#layer_login_select button.btn-modal-close').trigger("click");
    						gfn_alertMsgBoxSize('동일번호로 연속적인 인증이 발생하여 창을 닫습니다.\n3분후 다시 시도해 주세요.', 400, 250);	//동일번호로 연속적인 인증이 발생하여 창을 닫습니다.\\n번호를 확인 한 후 처음부터 다시 진행바랍니다.
    					}

    				}
    				else {
    					//회원가입
    					var options = {};
						options.msg = '동일번호로 연속적인 인증이 발생하여 창을 닫습니다.\n3분후 다시 시도해 주세요.';	//동일번호로 연속적인 인증이 발생하여 창을 닫습니다.\\n처음부터 다시 이용바랍니다.
						options.callback  = fn_mvMainPage;
						options.minWidth  = 400;
						options.minHeight = 250;
						gfn_alertMsgBox(options);
    				}
					return;
				}
				else {
					//nonMbCertRedisKey
					//console.log("certNo", data.resultMap.certNo);
					$('#nonMbCertNoSend').html("재전송");
					$('#loginForm input[name=nonMbCertedMblpNo]').attr('value',sNonMbTelno);
					gfn_alertMsgBoxSize('인증번호를 전송했습니다.\n인증번호가 도착하지 않았을 경우 재전송을 눌러 주세요.', 400, 250);

					if(typeof AuthTimer != 'undefined'){
						AuthTimer.fnStop();
						$('#timer').html("3:00");
					}
					else {
						AuthTimer = new $ComTimer();
					}
					AuthTimer.comSecond = 180;
					AuthTimer.fnCallback = function(){alert("다시인증을 시도해주세요.")}
					AuthTimer.timer = setInterval(function(){AuthTimer.fnTimer()},1000);
					AuthTimer.domId = document.getElementById("timer");
					//입력하신 휴대폰 번호로 인증번호가 발송되었습니다. 확인 후 인증번호를 입력해주세요!
				}
			},
			error: function(xhr,status,error){
				var err = JSON.parse(xhr.responseText);
				alert(xhr.status);
				alert(err.message);
			}
		});
	});


	//인증번호 확인 버튼 클릭
	$("#btnMblpCharCert").click(function(){
		if($("#btnMblpCharCert").hasClass("disabled")){
			return;
		}

		var sRedisKey     = $('#loginForm input[name=nonMbCertRedisKey]').val();
		var sMblpCharCertNo = $('#mblpCharCertNo').val();
		var sNonMbTelno     = $('#ibxNonMbTelno').val();
		var paramData = { redisKey : sRedisKey
						, certNo : sMblpCharCertNo
						, nonMbTelno : sNonMbTelno
						};

		$.ajaxMegaBox({
			url: "/on/oh/ohg/MbLogin/selectNonMbCertNoCnfn.rest",
			type: "POST",
			contentType: "application/json;charset=UTF-8",
			dataType: "json",
			data: JSON.stringify(paramData),
			success: function (data, textStatus, jqXHR) {
				var successAt = data.resultMap.successAt;
				var msg = data.resultMap.msg;
				var redisKey = data.resultMap.redisKey;

				if(successAt == "Y"){
					sValidateMblpCertNoSuccess = "Y";
					fn_validateNonMbInputVal();
					$('#loginForm input[name=nonMbCertRedisKey]').attr('value',data.resultMap.redisKey);
					$('#nonMbCert-error-text').text('');
					$("#nonMbCertNoSend").attr("disabled", true);
					$("#nonMbCertNoSend").addClass("disabled");
					$("#nonMbCertRow").hide();
					gfn_alertMsgBoxSize('휴대폰 인증을 완료했습니다.\n확인 버튼을 눌러주세요.', 400, 250);	//휴대폰 인증을 완료했습니다.
					if(typeof fn_validateJoinInfoRegInputVal != "undefined"){
						fn_validateJoinInfoRegInputVal()	//회원가입에서 검증함수 호출
					}
				}
				else {
					sValidateMblpCertNoSuccess = "N";
					if(msg == "ME019"){
						$('#nonMbCert-error-text').text('인증번호가 일치하지 않습니다.\n인증번호를 다시 입력해주세요.');	//msg.ch.ohg.ME019 인증번호를 다시 확인 후 입력해 주세요.
					}
					else if(msg == "ME040"){
						$('#nonMbCert-error-text').text('인증시간이 만료되었습니다. 인증번호를 재전송 후 입력바랍니다.');	//msg.ch.ohg.ME040	유효시간이 지났습니다.  인증번호 재전송을 통해서 다시 인증해주세요.
					}
					else if(msg == "ME061"){
						$('#nonMbCert-error-text').text('인증시간이 만료되었습니다. 인증번호를 재전송 후 입력바랍니다.');	//msg.ch.ohg.ME061	유효시간이 지났습니다.  인증번호 재전송을 통해서 다시 인증해주세요.
						gfn_alertMsgBoxSize('인증시간이 만료되었습니다. 인증번호를 재전송 후 입력바랍니다.',400,250);	//입력정보를 확인해주세요.
					}

					$("#nonMbCertNoSend").removeClass("disabled");
					$("#nonMbCertNoSend").attr("disabled", false);
					$("#nonMbCertRow").show();
				}
			},
			error: function(xhr,status,error){
				var err = JSON.parse(xhr.responseText);
				alert(xhr.status);
				alert(err.message);
			}
		});
	});

	// 비회원 정보 확인 팝업 요청
	$("#btnChkNonMbLogin").click(function(){

		if(submitIng) return;

		if(typeof $("#ibxNonMbPwdConfirm").val() != 'undefined'){
			if($("#ibxNonMbPwd").val() != $("#ibxNonMbPwdConfirm").val()) {
				gfn_alertMsgBoxSize('입력정보를 확인해주세요.',400,250);	//입력정보를 확인해주세요.
				return;
			}
		}

		//생년월일 날짜형태 확인
// 		if(!fn_validateDateYn($("#ibxNonMbByymmdd").val())) {
// 			alert("생년월일 입력이 잘못 되었습니다.");
// 			$("#ibxNonMbByymmdd").focus();
// 			return;
// 		}
		$("#btnNonMbLogin").attr("disabled", false);
		fn_chkNonMbLogin();
	});

	// 비회원 로그인
	$("#btnNonMbLogin").click(function(){

		var paramData = { nonMbNm:$("#ibxNonMbNm").val()
						, nonMbByymmdd:$("#ibxNonMbByymmdd").val()
						, nonMbTelno:$("#ibxNonMbTelno").val()
						, nonMbPwd:$("#ibxNonMbPwd").val()
						, bokdCnfmAt:bokdCnfmAt
						};

		$.ajaxMegaBox({
			url: "/on/oh/ohg/NonMbLogin/selectNonMbLoginInfo.rest",
			type: "POST",
			contentType: "application/json;charset=UTF-8",
			dataType: "json",
			data: JSON.stringify(paramData),
			success: function (data, textStatus, jqXHR) {

				var menuId                 = data.menuId;
	            var mappingId              = data.mappingId;
	            var statCd                 = data.result.statCd;


	            if(typeof loginPopupCallScn === "undefined"){
			    	loginPopupCallScn = "";
			    }
	            //화면이동
	            if(menuId != "" && menuId != null){    //화면으로 띄웠을떄
	                fn_mvPage(mappingId);
	                return;
	            }
	            else {
	                if(loginPopupCallScn != "" && loginPopupCallScn != null){  //팝업으로 띄었을때 파라메타는 팝업 호출화면에 전역으로 정의
	                    $(".btn-layer-close").trigger("click");
	                    if(loginPopupCallScn == "SimpleBokdM"){
	                    	$('.before').hide();
	            			$('.after').show();
	                        alert("콜백함수호출");
	                    } else if(loginPopupCallScn == "StoreDtlV"){
	                    	$('.before').hide();
	            			$('.after').show();
	                    } else if(loginPopupCallScn == "MySbscDtlsL"){
	                    	$('.before').hide();
	            			$('.after').show();
	            			location.href = '../index.html?currPage=1&amp;searchText=';
	                    }
	                }
	                else {
	                	var bokdLoginAt = $('#loginForm input[name=bokdLoginAt]').val();
	    				if(bokdLoginAt == "Y"){
	    					//예매로그인일경우
	    					//오입력값을 체크한다.
	    					$('.before').hide();
	        				$('.after').show();
	        				$('#btnNonMbModalClose').trigger("click");
	    					$('#layer_login_select button.btn-modal-close').trigger("click");
	    					fn_validDataRevisn(JSON.parse($('#loginForm input[name=bokdLoginParam]').val()));
	    					return;
	    				}

	                	if(bokdCnfmAt == "Y"){
	                		$('#nonMbBokdCnfmForm input[name=nonMbNm]').attr('value',$('#ibxNonMbNm').val());
	                		$('#nonMbBokdCnfmForm input[name=nonMbTelno]').attr('value',$('#ibxNonMbTelno').val());
	                		$('#nonMbBokdCnfmForm input[name=nonMbPwd]').attr('value',$('#ibxNonMbPwd').val());
	                		$('#nonMbBokdCnfmForm input[name=nonMbByymmdd]').attr('value',$('#ibxNonMbByymmdd').val());

                            /////////////////////////////////////////////////////////////////////
	                		// 예매정보가 없을 시 메세지 팝업처리 /////////////////////////////////
                            /////////////////////////////////////////////////////////////////////
                            if(statCd == 0) {
                                fn_mvNonMbBokdCnfm("/non-member"); //비회원 예매 확인일때
                            }else{
                                alert("입력하신 정보와 일치하는 예매내역이 없습니다.");
                            }
                            /////////////////////////////////////////////////////////////////////
                            /////////////////////////////////////////////////////////////////////

	                		//fn_mvNonMbBokdCnfm("/non-member"); //비회원 예매 확인일때
	                	}
	                	else {
	                		location.reload();
	                	}

	                }
	            }
	            return;
			},
			error: function(xhr,status,error){
				 var err = JSON.parse(xhr.responseText);
				 alert(xhr.status);
				 alert(err.message);
			},
			beforeSend: function() {
	            submitIng = true;
	        },
	        complete: function() {
	            submitIng = false;
	        }
	    });

	    //페이지 이동 submit
	    function fn_mvNonMbBokdCnfm(page){
// 	        console.log("fn_mvNonMbBokdCnfm : "+page);
	        $("#nonMbBokdCnfmForm").attr("method","post");
	        $("#nonMbBokdCnfmForm").attr("action",page);
	        $("#nonMbBokdCnfmForm").submit();
	    }

	  	//비회원 예매 확인 페이지 이동 submit
	    function fn_mvPage(page){
// 	        console.log("MbLoginScriptDV.fn_mvPage : "+page);
	        $("#loginForm").attr("method","post");
	        $("#loginForm").attr("action",page);
	        $("#loginForm").submit();
	    }
	});
});

function fn_adTracking(url){
	$.ajax({
        type: "get"
        , url: url
        , data: ""
        , dataType: "json"
        , success: function(result) {

        }
        , error: function(err) {
            console.log('fn_adEventCall error : ' + err.status);
        }
    });
}

/*호출 화면에 따른 분기처리*/
function fn_viewLoginPopup(viewId,deviceType,bokdLoginAt,bokdLoginParam,reloadYn){

  	//로그인 폼 호출시 광고영역 노출
    if( $("#Rw6jtk0hQTuOBSzFbvGGlw").html() == "" ){

    	$("#Rw6jtk0hQTuOBSzFbvGGlw").append('<a href="" target="_blank"><img id="pageBannerRnbImage" src="../static/pc/images/common/bg/bg-noimage-main.png" /></a>');

    	var header ={"typ": "JWT","alg": "HS256"}
        var data = {
            "device": {"devicetype": 2},
            "imp": [{"native": {"ext" : {"slots" : 1}}}],
            "site": {"name": "megabox"},
            "id": ""
        };
    	var secret = "Rw6jtk0hQTuOBSzFbvGGlw";

    	var stringifiedHeader = CryptoJS.enc.Utf8.parse(JSON.stringify(header));
        var encodedHeader = base64url(stringifiedHeader);
        var stringifiedData = CryptoJS.enc.Utf8.parse(JSON.stringify(data));
        var encodedData = base64url(stringifiedData);
        var signature = encodedHeader + "." + encodedData;
        signature = CryptoJS.HmacSHA256(signature, secret);
        signature = base64url(signature);
        var pram = encodedHeader+"."+encodedData+"."+signature;
        var adUrl = "https://cast.imp.joins.com/bid/"+secret+"/"+pram; //상용

    	$.ajax({
            type: "get"
            , url: adUrl
            , data: ""
            , success: function(result) {
                if(result) {
                    $("#pageBannerRnbImage").attr("src", result.image_file);
                    $("#pageBannerRnbImage").attr("alt", result.alternative_text);
                    $("#pageBannerRnbImage").attr("clickThrough", result.click_tracking);
                    $("#pageBannerRnbImage").parent().attr("href", result.click_through);



                    $("#pageBannerRnbImage").css("height", result.height);
                    $("#Rw6jtk0hQTuOBSzFbvGGlw").css("background-color", result.bgcolor);
                    fn_adTracking(result.impression_tracking);
                }
            }
            , error: function(err) {
                console.log('fn_getBannerAd error : ' + err.status);
            }
        });

    	//광고링크
   	    $("#pageBannerRnbImage").on("click", function() {
   	        var clickThrough = $(this).attr("clickThrough");
   	        if(clickThrough != undefined && clickThrough != '') {
   	        	fn_adTracking(clickThrough);
   	        }
   	    });
    }

	//
	$(".alert").html("");
	if(sCookieVal == ""){	//아이디 저장 체크 안했을경우
		$(".login-input-area #ibxLoginId").val("");			//아이디
	}
	$(".login-input-area #ibxLoginPwd").val("");		//비밀번호
	$(".no-member-login-table #ibxNonMbNm").val("");	//비회원 이름
	$(".no-member-login-table #ibxNonMbByymmdd").val("");	//비회원 생년월일
	$(".no-member-login-table #ibxNonMbTelno").val("");		//비회원 휴대폰 번호
	$(".no-member-login-table #mblpCharCertNo").val("");	//비회원 휴대폰인증번호
	$(".no-member-login-table #ibxNonMbPwd").val("");		//비회원 비밀번호
	$(".no-member-login-table #ibxNonMbPwdConfirm").val("");	//비회원 비밀번호확인
	$("input[name=chkNonMbBokdPersonInfoProc]").prop("checked",false);	//비회원 라디오버튼 해제
	if(typeof AuthTimer != 'undefined'){
	    AuthTimer.fnStop();
	    $('#timer').html("3:00");
	    $('#nonMbCertNoSend').html("인증요청");
	    sValidateMblpCertNoSuccess = "N";
	    $('#nonMbCertRow').show();
	    $('#mblpCharCertNo').val("");
	    $("#nonMbCertNoSend").removeClass("disabled");
	    $("#nonMbCertNoSend").attr("disabled", false);
	}
	fn_validateNonMbInputVal();

	$('#loginForm input[name=bokdLoginAt]').val("");				//예매 로그인 여부
	$('#loginForm input[name=bokdLoginParam]').val("");				//예매 로그인 파라메타
	$('#loginForm input[name=validDataRevisnYn]').val("");				//데이터 보정 여부
	fn_validateInputVal();

	if('pc' == deviceType){

		if('SimpleBokdM' == viewId) {
			var sBokdLoginAt = typeof bokdLoginAt == 'undefined' ? "" : bokdLoginAt;//예매 로그인 여부
			$('#layer_login_select .layer-con .tab-list').show();			//로그인 비회원로그인 선택창
			$('#layer_login_select .layer-con .tab-cont-wrap .login-member').removeClass('pt00');	//레이어 사이즈 줄임
			$("#loginPupupATag").attr("h-data",'556');	//높이값 변경
			$("#loginPupupATag").trigger("click");	//레이어띄움
			$('#loginForm input[name=bokdLoginAt]').attr('value',sBokdLoginAt);			//예매 로그인 여부 값 설정
			$('#loginForm input[name=bokdLoginParam]').attr('value',bokdLoginParam);	//예매 로그인 파라메타
			if(bokdLoginAt == "Y"){
				$('#loginForm input[name=nonMbCertRedisKey]').val("");
				$('#loginForm input[name=nonMbCertedMblpNo]').val("");
			}

		}
		else if('StoreDtlV' == viewId || 'MySbscDtlsL' == viewId) {
			$("#loginPupupATag").trigger("click");	//레이어띄움
			$("#mbPopLayer").show();		//회원 레이어
			$("#nonMbLogoLayer").hide();	//비회원 로고
			$("#nonMbPopLayer").hide();		//비회원 레이어
			$("#mbMbChoiLayer").hide();	//회원 비회원 선택

			$("#nonMbBokdCnfm").attr("style","display:none");
		}
		else if('BoutiqPrivateL' == viewId){	//부티크
			$('#layer_login_select .layer-con .tab-list li:eq(0) a').trigger("click");	//회원로그인만 클릭되도록
			$('#layer_login_select .layer-con .tab-list').hide();						//로그인 비회원로그인 선택창
			$('#layer_login_select .layer-con .tab-cont-wrap .login-member').addClass('pt00');	//레이어 사이즈 줄임
			$("#loginPupupATag").attr("h-data",'484');	//높이값 변경
			$("#loginPupupATag").trigger("click");	//레이어띄움

			$('#loginForm input[name=reloadYn]').attr('value',reloadYn); // 화면 리로드 설정
			$('#loginForm input[name=validDataRevisnYn]').val("Y");				//데이터 보정 여부
		}
		else {
			var sReloadYn = typeof reloadYn == 'undefined' ? "" : reloadYn;// 화면 리로드 여부
			$('#layer_login_select .layer-con .tab-list li:eq(0) a').trigger("click");	//회원로그인만 클릭되도록
			$('#layer_login_select .layer-con .tab-list').hide();						//로그인 비회원로그인 선택창
			$('#layer_login_select .layer-con .tab-cont-wrap .login-member').addClass('pt00');	//레이어 사이즈 줄임
			$("#loginPupupATag").attr("h-data",'484');	//높이값 변경
			$("#loginPupupATag").trigger("click");	//레이어띄움

			$('#loginForm input[name=reloadYn]').attr('value',sReloadYn); // 화면 리로드 설정
		}
	}
}

//입력 문자 체크
function fn_validateNonMbInputVal(){
	//이름
	if($("#ibxNonMbNm").val() != "") {
		sValidateNonMbNmAt = 'Y';
	}
	else {
		sValidateNonMbNmAt = 'N';
	}

	//생년월일
	if($("#ibxNonMbByymmdd").val() != "") {
		if(fn_validateDateYn($("#ibxNonMbByymmdd").val(),6)){
			sValidateNonMbByymmddAt = 'Y';
			//비회원예매확인
			if(bokdCnfmAt == "Y"){
				$('#ErrTextNonMbByymmdd').text('');
			}
			//비회원로그인
			else {
				$('#mblpInput-error-text').text('');
			}
		}
		else {
			sValidateNonMbByymmddAt = 'N';
			//비회원예매확인
			if(bokdCnfmAt == "Y"){
				$('#ErrTextNonMbByymmdd').text('생년월일을 정확히 입력해주세요.');
			}
			//비회원로그인
			else {
				$('#mblpInput-error-text').text('생년월일을 정확히 입력해주세요.');
			}
			return false;
		}
	}
	else {
		sValidateNonMbByymmddAt = 'N';
		$('#mblpInput-error-text').text('');
	}

	//휴대폰 번호
	if($("#ibxNonMbTelno").val() != "") {
		var frontNm = $("#ibxNonMbTelno").val().substr(0,2);
		if(frontNm != '01'){
			$('#mblpInput-error-text').text('휴대폰번호를 정확히 입력해주세요.');
			ibxNonMbTelno = 'N';
			return false;
		}
		else if($("#ibxNonMbTelno").val().length < 10){
			$('#mblpInput-error-text').text('휴대폰번호를 정확히 입력해주세요.');
			sValidateNonMbTelnoAt = 'N';
			return false;
		}
		else {
			sValidateNonMbTelnoAt = 'Y';
			$('#mblpInput-error-text').text('');
		}
	}
	else {
		sValidateNonMbTelnoAt = 'N';
	}


	if($("#ibxNonMbPwd").val().length == 4) {
		sValidateNonMbPwdAt = 'Y';
	}
	else {
		sValidateNonMbPwdAt = 'N';
	}
	if(bokdCnfmAt == "Y"){
		sValidateNonMbPwdConfirmAt       = 'Y';
		sValidateNonMbPwdEqualAt         = 'Y';
		sValidateNonMbBokdPersonInfoProc = 'Y';
		sValidateMblpCertNoSuccess       = 'Y';
	}
	else{
		if($("#ibxNonMbPwdConfirm").val().length == 4) {
			sValidateNonMbPwdConfirmAt = 'Y';
		}
		else {
			sValidateNonMbPwdConfirmAt = 'N';
		}

		if($("#ibxNonMbPwd").val().length > 0 && $("#ibxNonMbPwdConfirm").val().length > 0 && $("#ibxNonMbPwd").val() == $("#ibxNonMbPwdConfirm").val()) {
			sValidateNonMbPwdEqualAt = 'Y';
			$('#nonMbPwdErrText').text('');
		}
		else if($("#ibxNonMbPwd").val().length > 0 && $("#ibxNonMbPwdConfirm").val().length > 0 && $("#ibxNonMbPwd").val() != $("#ibxNonMbPwdConfirm").val()){
			sValidateNonMbPwdEqualAt = 'N';
			$('#nonMbPwdErrText').text('비밀번호와 비밀번호 확인의 입력값이 일치하지 않습니다.');
			return false;
		}

		if($('#chkNonMbBokdPersonInfoProcTrue').prop("checked")){
			sValidateNonMbBokdPersonInfoProc = 'Y';
		}
		else {
			sValidateNonMbBokdPersonInfoProc = 'N';
		}

		if($('#chkNonMbBokdPersonInfoProcFalse').prop("checked")){
			sValidateNonMbBokdPersonInfoProc = 'N';
		}
	}

// 	$('#error-text1').text
// 	("sValidateNonMbNmAt:"             +sValidateNonMbNmAt              +("/")+$("#ibxNonMbNm").val().length        +("\n\n")+
// 			"sValidateNonMbByymmddAt:"         +sValidateNonMbByymmddAt         +("/")+$("#ibxNonMbByymmdd").val().length   +("\n\n")+
// 			"sValidateNonMbTelnoAt:"           +sValidateNonMbTelnoAt           +("/")+$("#ibxNonMbTelno").val().length     +("\n\n")+
// 			"sValidateNonMbPwdAt:"             +sValidateNonMbPwdAt             +("/")+$("#ibxNonMbPwd").val().length       +("\n\n")+
// 			"sValidateNonMbPwdConfirmAt:"      +sValidateNonMbPwdConfirmAt      +("/")+$("#ibxNonMbPwdConfirm").val().length+("\n\n")+
// 			"sValidateNonMbPwdEqualAt:"        +sValidateNonMbPwdEqualAt        +("/\n\n")+
// 			"sValidateNonMbBokdPersonInfoProc:"+sValidateNonMbBokdPersonInfoProc+("/\n\n")
// 		+$("input:checkbox[id='chkNonMbBokdPersonInfoProc']").is(":checked"));

	if(    bokdCnfmAt                       == "N"
		&& sValidateNonMbNmAt               == 'Y'
		&& sValidateNonMbByymmddAt          == 'Y'
		&& sValidateNonMbTelnoAt            == 'Y'
		&& sValidateNonMbPwdAt              == 'Y'
		&& sValidateNonMbPwdConfirmAt       == 'Y'
		&& sValidateNonMbBokdPersonInfoProc == 'Y'
 		&& sValidateNonMbPwdEqualAt         == 'Y'
 		&& sValidateMblpCertNoSuccess       == 'Y'){
		$("#btnChkNonMbLogin").attr("disabled", false);
		return true;
	}
	else if (bokdCnfmAt == "Y"
			&& sValidateNonMbNmAt       == 'Y'
			&& sValidateNonMbByymmddAt         == 'Y'
			&& sValidateNonMbTelnoAt == 'Y'
			&& sValidateNonMbPwdAt       == 'Y'){
		$("#btnNonMbLogin").attr("disabled", false);
		return true;
	}
	else{
		$("#btnChkNonMbLogin").attr("disabled", true);
		$("#btnNonMbLogin").attr("disabled", true);
		return false;
	}
}

/*날짜 형태 확인*/
function fn_validateDateYn(param, length) {
	try
	{
		var year  = 0;
		var month = 0;
		var day   = 0;

		param = param.replace(/-/g,'');

		// 자리수가 맞지않을때
		if( isNaN(param) || param.length < Number(length) || param.length > Number(length)) {
			return false;
		}

		if( param.length == 6){
			year  = Number(param.substring(0, 2));
			month = Number(param.substring(2, 4));
			day   = Number(param.substring(4, 6));
		}
		else if(param.length == 8){
			year  = Number(param.substring(0, 4));
			month = Number(param.substring(4, 6));
			day   = Number(param.substring(6, 8));

			var sysYear = Number(new Date().getFullYear());
			//년도입력이 현재 년도보다 클때.
			if(sysYear < year){
				return false;
			}
		}
		else {
			return false;
		}


		var dd = day / 0;


		if( month<1 || month>12 ) {
			return false;
		}

		var maxDaysInMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
		var maxDay = maxDaysInMonth[month-1];

		// 윤년 체크
		if( month==2 && ( year%4==0 && year%100!=0 || year%400==0 ) ) {
			maxDay = 29;
		}

		if( day<=0 || day>maxDay ) {
			return false;
		}
		return true;

	} catch (err) {
		return false;
	}
}


function $ComTimer(){
    //prototype extend
}

$ComTimer.prototype = {
    comSecond : ""
    , fnCallback : function(){}
    , timer : ""
    , domId : ""
    , fnTimer : function(){
        var m = Math.floor(this.comSecond / 60) + ":" + String((this.comSecond % 60)).lpad(2,"0");	// 남은 시간 계산
        this.comSecond--;					// 1초씩 감소
        this.domId.innerText = m;
        if (this.comSecond < 0) {			// 시간이 종료 되었으면..
            clearInterval(this.timer);		// 타이머 해제
            $('#nonMbCert-error-text').text('인증시간이 만료되었습니다. 인증번호를 재전송 후 입력바랍니다.');	//msg.ch.ohg.ME061	인증시간이 만료되었습니다. 인증번호를 재전송 후 입력바랍니다.
            $("#btnMblpCharCert").attr("disabled", true);	//인증확인버튼 비활성
			$("#btnMblpCharCert").addClass("disabled");		//인증확인버튼 비활성
        }
    }
    ,fnStop : function(){
        clearInterval(this.timer);
    }
}

</script>
<script type="text/javascript">
var simpleLoginWithPopup;
var simpleLoginWith = function(lnkgTy){
    var url = "/on/oc/ocz/SimpleLogin/simpleLogin.do?lnkgTy=" + lnkgTy;
    if ( simpleLoginWithPopup ) {
        simpleLoginWithPopup.close();
    }
    if(lnkgTy != "FACEBOOK"){
		simpleLoginWithPopup = window.open(url, 'simpleLoginWithPopup', 'width=420, height=550');
	}
	else {
		simpleLoginWithPopup = window.open(url, 'simpleLoginWithPopup', 'width=650, height=600, scrollbars=yes');
	}
}

var fn_LoginPopUpCall = function(paramData){
    if ( lnkgInfoObj.attr("connTy") != undefined ) {
        fn_ConnWithCallBack(paramData);
    } else {
        fn_LoginWithCallBack(paramData);
    }

}
var fn_LoginPopUpCallError = function(msg){
    gfn_alertMsgBoxSize(msg, 400, 250);
}

//비회원 확인 팝업
function fn_chkNonMbLogin() {

	var $td = $(document).find('#layer_no_member_chk td');

	var telTmp = $('#ibxNonMbTelno').val();

	switch(telTmp.length){
	case 10 : telTmp = telTmp.format('XXX-XXX-XXXX'); break;
	case 11 : telTmp = telTmp.format('XXX-XXXX-XXXX');break;
	}

	$td.eq(0).html($('#ibxNonMbNm').val());
	$td.eq(1).html($('#ibxNonMbByymmdd').val());
	$td.eq(2).html(telTmp);

	// 레이어 호출
	$(document).find('#aNonMbLogin').click();
}
</script>
<script type="text/javascript">
var fn_LoginWithCallBack = function(paramData){
    $.ajaxMegaBox({
        url: "/on/oc/ocz/SimpleLogin/selectSimpleLogin.do",
        type: "POST",
        contentType: "application/json;charset=UTF-8",
        dataType: "json",
        data: JSON.stringify(paramData),
        success: function (data, textStatus, jqXHR) {
            if ( data.userMap == null ) {
            	//var simpleLoginTyCd = data.userMap.simpleLoginTyCd;
                gfn_alertMsgBoxSize('['+paramData.simpleLoginTyCd+'] 계정으로 연동된 메가박스 계정이 없습니다.\n연동을 원하시면 나의메가박스 > 개인정보수정에서\n간편로그인 계정연동을 진행해 주세요.', 400, 250);
            } else {
                var loginId = data.userMap.loginId;
                var mbNo    = data.userMap.mbNo;
                fn_selectMbLogin(loginId, "simpleLogin", "Y", paramData.redisKey);
            }
        },
        error: function(xhr,status,error){
            var err = JSON.parse(xhr.responseText);
            alert(xhr.status);
            alert(err.message);
        }
    });
}
var lnkgInfoObj;
$(function(){
    $("div.sns-login > a").off("click").on("click",function(){
        lnkgInfoObj = $(this);
        simpleLoginWith($(this).attr("lnkgTy"));
    });
});
</script>
<form id="loginForm">
	<input type='hidden' name='redisKey' value='' />
	<input type='hidden' name='menuId' value='' />
	<input type='hidden' name='mappingId' value='' />
	<input type='hidden' name='rtnParam' value='' />
	<input type='hidden' name='certType' value='' />
	<input type='hidden' name='preUrl' value='' />

	<!-- 좌석도 로그인 프로세스 여부PARAM-->
	<input type='hidden' name='bokdLoginAt' value='' />
	<input type='hidden' name='bokdLoginParam' value='' />

	<input type='hidden' name='nonMbCertRedisKey' value='' />
	<input type='hidden' name='nonMbCertedMblpNo' value='' />

	<input type='hidden' name='reloadYn' value='' />
	<input type='hidden' name='validDataRevisnYn' value='N' />

</form>







<!--  ko_KR -->
        
<!-- 로그인 레이어팝업 시작 -->
<!-- 화면ID  M-ME-LO-01 -->
<!-- 화면ID  M-ME-CC-01 -->
<div style="display:none;"><a id="loginPupupATag" href="#layer_login_select" class="button active btn-modal-open" w-data="850" h-data="484"></a></div>

	<section id="layer_login_select" class="modal-layer" style="z-index: 501;"><a href="#" class="focus" title="레이어로 포커스 이동 됨">레이어로 포커스 이동 됨<!--레이어로 포커스 이동 됨--></a>
		<div class="wrap" style="width: 850px; height: 556px; margin-left: -425px; margin-top: -278px;">
			<header class="layer-header">
				<h3 class="tit">로그인</h3>
			</header>

			<div class="layer-con" style="height: 511px;">

				<div class="tab-list tab-layer">
					<ul>
						<li class="on"><a href="#login_tab_01" title="회원 로그인 선택">회원 로그인<!--회원 로그인--></a></li>
						<li><a href="#login_tab_02" title="비회원 로그인 선택">비회원 로그인<!--비회원 로그인--></a></li>
					</ul>
				</div>

				<!-- tab-cont-wrap -->
				<div class="tab-cont-wrap">
					<!-- tab 회원 로그인 -->
					<div id="login_tab_01" class="tab-cont on"><a href="#" class="ir" title="로그인"></a>

						<div class="login-member col-2">
							<!-- col-wrap -->
							<div class="col-wrap">
								<div class="col left">
									<div class="login-input-area">
										<input autocomplete="off" id="ibxLoginId" maxlength="20" type="text" placeholder="아이디" title="아이디를 입력하세요" class="input-text strTrim"><!--아이디--><!--아이디를 입력하세요-->
										<input autocomplete="off" id="ibxLoginPwd" maxlength="20" type="password" placeholder="비밀번호" title="비밀번호를 입력하세요" class="input-text mt15"><!--비밀번호--><!--비밀번호를 입력하세요-->
										<div class="alert"></div>

										<!-- chk-util -->
										<div class="chk-util">
											<div class="left">
												<input id="chkIdSave" type="checkbox"> <label for="chkIdSave">아이디 저장<!--아이디 저장--></label>
											</div>

											<div class="right">
												<div class="hp-ad">
										      <a href="https://www.sepay.org/spm/join?regSiteCode=XF&amp;ctgCode=1&amp;subCode=1" title="휴대폰 간편 로그인 선택" target="_blank" title="새창 열림"><span>휴대폰 간편로그인<!--휴대폰 간편로그인--></span> <em>광고<!--광고--></em></a>
												</div>
											</div>
										</div>
										<!--// chk-util -->

										<button id="btnLogin" type="button" class="button purple large btn-login">로그인<!--로그인--></button>

										<div class="link">
											<a href="../user-find.html" title="ID/PW 찾기 선택">ID/PW 찾기<!--ID/PW 찾기--></a>
											<a href="../join.html" title="회원가입 선택">회원가입<!--회원가입--></a>
											<a href="../on/oh/ohg/MbLogin/viewNonMbLogin.html" title="비회원 예매확인 선택">비회원 예매확인<!--비회원 예매확인--></a>
										</div>

										<div class="sns-login">
											<a href="javaScript:void(0)" lnkgTy="FACEBOOK" title="페이스북으로 로그인 선택"><img src="../static/pc/images/member/ico-facebook.png"  alt="페이스북"><!--페이스북--> 페이스북으로 로그인<!--페이스북으로 로그인--></a>
											<a href="javaScript:void(0)" lnkgTy="NAVER"    title="네이버로 로그인 선택"><img src="../static/pc/images/member/ico-naver.png"     alt="네이버"><!--네이버-->   네이버로 로그인<!--네이버로 로그인--></a>
											<a href="javaScript:void(0)" lnkgTy="KAKAO"    title="카카오톡으로 로그인 선택" ><img src="../static/pc/images/member/ico-kakao.png"    alt="카카오톡"><!--카카오톡--> 카카오톡으로 로그인<!--카카오톡으로 로그인--></a>
											<a href="javaScript:void(0)" lnkgTy="PAYCO"    title="페이코로 로그인 선택"><img src="../static/pc/images/member/ico-payco.png"     alt="페이코"><!--페이코-->   페이코로 로그인<!--페이코로 로그인--></a>
										</div>
									</div>
								</div>

								<div class="col right">
									<div class="login-ad" id="Rw6jtk0hQTuOBSzFbvGGlw"></div>
								</div>
							</div>
							<!--// col-wrap -->
						</div>
					</div>
					<!--// tab 회원 로그인 -->

					<!-- tab 비회원 로그인 -->
					<div id="login_tab_02" class="tab-cont"><a href="#" class="ir" title="비회원 로그인"></a>

						<div class="login-member col-2">
							<!-- col-wrap -->
							<div class="col-wrap">
								<div class="col left">

									<div class="no-member-login-table">
										<table summary="이름, 생년월일, 휴대폰번호, 인증번호, 비밀번호, 비밀번호 확인 항목을 가진 비회원 로그인 입력 표">
											<caption>이름, 생년월일, 휴대폰번호, 인증번호, 비밀번호, 비밀번호 확인 항목을 가진 비회원 로그인 입력 표<!--이름, 생년월일, 휴대폰번호, 인증번호, 비밀번호, 비밀번호 확인 항목을 가진 비회원 로그인 입력 표--></caption>
											<colgroup>
												<col style="width:110px;">
												<col>
											</colgroup>
											<tbody>
												<tr>
													<th scope="row">
														<label for="ibxNonMbNm">이름<!--이름--></label>
													</th>
													<td>
														<input maxlength="20" id="ibxNonMbNm" type="text" placeholder="이름" class="input-text"><!--이름-->
													</td>
												</tr>
												<tr>
													<th scope="row">
														<label for="ibxNonMbByymmdd">생년월일<!--생년월일--></label>
													</th>
													<td>
														<input maxlength="6" id="ibxNonMbByymmdd" type="text" placeholder="생년월일 앞6자리" class="input-text"><!--주민번호 앞 6자리-->
													</td>
												</tr>
												<tr>
													<th scope="row">
														<label for="ibxNonMbTelno">휴대폰번호<!--휴대폰번호--></label>
													</th>
													<td>
														<div class="hp-input">
															<input maxlength="11" id="ibxNonMbTelno" type="text" placeholder="- 없이 입력" class="input-text"><!--- 없이 입력-->
															<button id="nonMbCertNoSend" type="button" class="button gray" disabled="disabled">인증요청<!--인증요청--></button>
														</div>
														<div id="mblpInput-error-text" class="alert" ></div>
													</td>
												</tr>
												<tr id="nonMbCertRow">
													<th scope="row">
														<label for="mblpCharCertNo">인증번호<!--인증번호--></label>
													</th>
													<td>
														<div class="chk-num">
															<div class="line">
																<input maxlength="4" id="mblpCharCertNo" type="text" class="input-text">

																<div class="time-limit" id="timer">
																	3:00
																</div>
															</div>

															<button id="btnMblpCharCert" type="button" class="button purple" disabled="disabled">확인<!--확인--></button>
														</div>
														<div id="nonMbCert-error-text" class="alert"></div>
													</td>
												</tr>
												<tr>
													<th scope="row">
														<label for="ibxNonMbPwd">비밀번호</label><!--비밀번호-->
													</th>
													<td>
														<input  maxlength="4" id="ibxNonMbPwd" type="password" placeholder="비밀번호(숫자 4자리)" class="input-text"><!--비밀번호(숫자 4자리)-->
													</td>
												</tr>
												<tr>
													<th scope="row">
														<label for="ibxNonMbPwdConfirm">비밀번호<!--비밀번호-->확인<!--확인--></label>
													</th>
													<td>
														<input maxlength="4" id="ibxNonMbPwdConfirm" type="password" placeholder="비밀번호(숫자 4자리) 확인" class="input-text"><!--비밀번호(숫자 4자리) 확인-->
														<div id="nonMbPwdErrText" class="alert"></div>
													</td>
												</tr>
											</tbody>
										</table>
									</div>
								</div>

								<div class="col right">

									<div class="no-member-privacy-rule">
										<p class="tit">비회원예매 개인정보 처리방침<!--비회원예매 개인정보 처리방침--></p>

										<div class="cont">
											<dl>
												<dt>수집목적</dt><dd>비회원예매 서비스 제공 / 이용자식별 / 구매 및  결제</dd><dt>수집항목</dt><dd>이름, 생년월일, 휴대폰번호, 비밀번호</dd><dt>보유기간</dt><dd>관람 또는 취소 후 7일 이내</dd><!--<dt>수집목적</dt><dd>비회원예매 서비스 제공 / 이용자식별 / 구매 및  결제</dd><dt>수집항목</dt><dd>이름, 생년월일, 휴대폰번호, 비밀번호</dd><dt>보유기간</dt><dd>관람 또는 취소 후 7일 이내</dd>-->
											</dl>

											<div class="btn-agree">
												<input type="radio"  id="chkNonMbBokdPersonInfoProcTrue" name="chkNonMbBokdPersonInfoProc">
												<label for="chkNonMbBokdPersonInfoProcTrue">동의<!--동의--></label>

												<input type="radio" id="chkNonMbBokdPersonInfoProcFalse" name="chkNonMbBokdPersonInfoProc" class="ml20">
												<label for="chkNonMbBokdPersonInfoProcFalse">미동의<!--미동의--></label>
											</div>

											<ul class="dot-list gblue mt20">
												<li class="font-gblue">정보수집에 동의를 거부할 수 있으며, 동의하지 않을 경우 비회원 예매서비스를 이용하실 수 없습니다.<!--정보수집에 동의를 거부할 수 있으며, 동의하지 않을 경우 비회원 예매서비스를 이용하실 수 없습니다.--></li>
											</ul>
										</div>
									</div>
								</div>
							</div>
							<!--// col-wrap -->

							<div class="btn-group">
								<button id="btnChkNonMbLogin" type="button" class="button purple">확인</button>
								<a id="aNonMbLogin" href="#layer_no_member_chk" class="button purple btn-modal-open" w-data='600' h-data='320' style="display: none;"></a>
							</div>
						</div>
					</div>
					<!--// tab 비회원 로그인 -->
				</div>
				<!--// tab-cont-wrap -->
			</div>

			<button type="button" class="btn-modal-close">레이어 닫기<!--레이어 닫기--></button>
		</div>
	</section>

	<section id="layer_no_member_chk" class="modal-layer">
		<div class="wrap">
			<header class="layer-header">
				<h3 class="tit">알림</h3>
			</header>

			<div class="layer-con">
				<p>티켓 발권을 위한 입력정보를 확인해 주세요.</p>

				<div class="table-wrap v1">
					<table class="data-table" summary="이름, 생년월일, 휴대폰번호 항목을 가진 비회원 티켓 발권을 위한 입력정보 표">
						<caption>이름, 생년월일, 휴대폰번호 항목을 가진 비회원 티켓 발권을 위한 입력정보 표</caption>
						<colgroup>
							<col style="width:80px;" />
							<col />
						</colgroup>
						<tbody>
							<tr>
								<th scope="row" class="a-l">이름</th>
								<td></td>
							</tr>
							<tr>
								<th scope="row" class="a-l">생년월일</th>
								<td></td>
							</tr>
							<tr>
								<th scope="row" class="a-l">휴대폰번호</th>
								<td></td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>

			<div class="btn-group-fixed">
				<button type="button" class="button close-layer small">취소</button>
				<button id="btnNonMbLogin" type="button" class="button purple small">확인</button>
			</div>

			<button id="btnNonMbModalClose" type="button" class="btn-modal-close">레이어 닫기</button>
		</div>
	</section>
<!--  ko_KR -->
        

<script type="text/javascript">
    $(function(){
        
            
                $('#header .right-link .before').show();
                $('#header .right-link .after').hide();
                //session 관련 처리를 위한 부분
                $.ajaxMegaBox({
                    url: '/sessionChk.do',
                    success: function(data) {
                        var loginYn = data.loginYn;
                        if(loginYn == 'Y'){
                            $('.right-link .before').hide();
                        $('.right-link .after').show();
                        }else{
                            $('.right-link .before').show();
                        $('.right-link .after').hide();
                        }
                     }
               });
            
            
        

        // 웹에서만 실행 -> facebook을 로드하지 않는 템플릿에서 반복적인 오류 발생으로 hreader로 이전
        if(!MegaboxUtil.Common.isMobile() && !MegaboxUtil.Common.isApp())
            MegaboxUtil.Share.init();
    });

    //로그인 버튼
    $(document).on('click', '#moveLogin', function() {

        fn_viewLoginPopup('default','pc');

    });

    var sysCd = 'ON';

  	//넷퍼넬 스킨 타입 지정
	NetfunnelChk.setting( sysCd, MegaboxUtil.Common.isApp() );

</script>


<!-- 메인에만 광고영역 노출 -->

<!-- 메인 영화에만 광고영역 노출 -->


<!-- header -->
<header id="header" >
    <h1 class="ci"><a href="../index.html" title="MEGABOX 메인으로 가기">MEGABOX : Life Theater</a></h1>

	<!-- 브라우저 다운로드 -->
    

    <script type="text/javascript">
    $(function(){
	  	//닫기 버튼 클릭
		$('.ie-update').on('click', '.close-chk .closeDl', function() {
			 if ($(":checkbox[id='one_month_no_update']:checked").length > 0) {
				fn_setCookie("BROWDER_DL", "Y", 30);
			}

			$('.ie-update').hide();
		});

		//다시보지 않기
		 if (fn_getCookie("BROWDER_DL") == null || fn_getCookie("BROWDER_DL") == 'N') {
			if ( $(".lt-ie9").length > 0 && $('.ie-update').length > 0 ) {
				$('.ie-update').show();
			}
		}
    });
    </script>
	<!-- ie-update : ie 9 이하 일때만 출력 -->
	<div class="ie-update">
		<div class="dimd"></div>
		<div class="wrap">
			<p class="tit">
				<img src="../static/pc/images/ie/txt-update.png" alt="megabox 홈페이지는 internet explrer10이상에서 최적화된 서비스 이용이 가능합니다. ie9 이하에서는 예매가 정상적으로 진행되지 않을 수 있으니, 브라우저를 업그레이드하시거나 다른 예매수단을 이용해 주세요!" />
			</p>

			<div class="box">
				<div class="col">
					<p class="txt">브라우저를 최신 버전으로<br>업그레이드 해보세요!</p>

					<div class="link">
						<a href="https://www.microsoft.com/ko-kr/download/internet-explorer.aspx" title="internet explorer 새 버전 다운로드" target="_blank">
							<img src="../static/pc/images/ie/btn-ie.png" alt="internet explorer 새 버전 다운로드" />
						</a>
					</div>

					<div class="link">
						<a href="http://www.google.com/chrome?hl=ko" title="chrome 다운로드" target="_blank">
							<img src="../static/pc/images/ie/btn-chrome.png" alt="chrome 다운로드">
						</a>
					</div>
				</div>

				<div class="col">
					<p class="txt">megabox 모바일 app을<br>이용해 보세요!</p>

					<div class="link">
						<a href="https://itunes.apple.com/us/app/megabox/id894443858?l=ko&amp;ls=1&amp;mt=8" title="available on the app store" target="_blank">
							<img  src="../static/pc/images/ie/btn-appstore.png" alt="available on the app store">
						</a>
					</div>

					<div class="link">
						<a href="https://play.google.com/store/apps/details?id=com.megabox.mop&amp;hl=ko" title="available on the google play" target="_blank">
							<img src="../static/pc/images/ie/btn-google.png" alt="available on the google play">
						</a>
					</div>
				</div>
			</div>

			<div class="close-chk">
				<input type="checkbox" id="one_month_no_update" />
				<label for="one_month_no_update" class="ml05">한 달 동안 이 창을 열지 않음</label>

				<button type="button" class="closeDl button purple x-small ml20">닫기</button>
			</div>
		</div>
	</div>
	<!--// ie-update : ie 9 이하 일때만 출력 -->
    <!--// 브라우저 다운로드 -->

    <!-- topGnb -->
    



	<!-- 2019-04-15 마크업 수정 : 고객요청  -->
    <div class="util-area">
        <div class="left-link">
            <a href="../benefit/viplounge.html" 	title="VIP LOUNGE">VIP LOUNGE</a>
            <a href="../benefit/membership.html"	title="멤버십">멤버십</a>
            <a href="../support.html"				title="고객센터">고객센터</a>
        </div>

        <div class="right-link">
            <!-- 로그인전 -->
            <div class="before" style="display:none">
                <a href="javaScript:fn_viewLoginPopup('default','pc')" title="로그인">로그인</a>
                <a href="../join.html" title="회원가입">회원가입</a>
            </div>

            <!-- 로그인후 -->
            <div class="after" style="display:none">
                <a href="../index.html" class="" title="로그아웃">로그아웃</a>
                <a href="#" class="notice" title="알림">알림</a>

                <!-- layer-header-notice -->
				<div class="layer-header-notice">
					<div class="notice-wrap">
						<p class="tit-notice">알림함</p>

						<div class="count">
							<p class="left">전체 <em class="totalCnt">0</em> 건</p>

							<p class="right">* 최근 30일 내역만 노출됩니다.</p>
						</div>

						<!-- scroll -->
						<div class="scroll m-scroll">
							<ul class="list">
								<li class="no-list">
									알림 내역이 없습니다.
								</li>
							</ul>
						</div>
						<div class="notice-list-more">
							<button type="button" class="button btn-more-notice-list">더보기 <i class="iconset ico-btn-more-arr"></i></button>
						</div>
						<!--// scroll -->
						<button type="button" class="btn-close-header-notice">알림 닫기</button>
					</div>
					<!--// notice-wrap -->
				<!--// layer-header-notice -->
				</div>

            </div>

            <a href="../booking.html">빠른예매</a>
        </div>
    </div>
    <!--// 2019-04-15 마크업 수정 : 고객요청  -->

    <div class="link-area">
        <a href="#layer_sitemap" 		class="header-open-layer btn-layer-sitemap"	title="사이트맵">사이트맵</a>
        <a href="#layer_header_search" 	class="header-open-layer btn-layer-search"	title="검색">검색</a>
        <a href="timetable.html" 	class="link-ticket" 						title="상영시간표">상영시간표</a>
        <a href="#layer_mymega" 		class="header-open-layer btn-layer-mymega" 	title="나의 메가박스">나의 메가박스</a>
    </div>

    <!-- gnb -->
    <!--
        2019-04-15 마크업 수정 : 고객요청
        1뎁스 a 태그에 각각 다른 class 추가
    -->
    
    <nav id="gnb">
        <ul class="gnb-depth1">
            <li><a href="../movie.html" class="gnb-txt-movie" title="영화">영화</a>
                <div class="gnb-depth2">
                    <ul>
                        <li><a href="../movie.html"					title="전체영화">전체영화</a></li>
                        <li><a href="../curation/specialcontent.html"	title="큐레이션">큐레이션</a></li>
                        
                        <li id="festivalArea" style="display: none;"><a href="../festival.html" title="영화제">영화제</a></li>
                        <li><a href="../moviepost/all.html"			title="무비포스트">무비포스트</a></li>
                    </ul>
                </div>
            </li>
            <li><a href="../booking.html" class="gnb-txt-reserve" title="예매">예매</a>
                <div class="gnb-depth2">
                    <ul>
                        <li><a href="../booking.html"					title="빠른예매">빠른예매</a></li>
                        <li><a href="timetable.html"		title="상영시간표">상영시간표</a></li>
                        <li><a href="privatebooking.html"	title="더 부티크 프라이빗 예매">더 부티크 프라이빗 예매</a></li>
                    </ul>
                </div>
            </li>
            <li><a href="../theater/list.html" class="gnb-txt-theater" title="극장">극장</a>
                <div class="gnb-depth2">
                    <ul>
                        <li><a href="../theater/list.html" title="전체극장">전체극장</a></li>
                        <li><a href="../specialtheater/list.html" title="특별관">특별관</a></li>
                    </ul>
                </div>
            </li>
            <li><a href="javascript:void(0)" onclick="NetfunnelChk.aTag('EVENT_LIST','/event');return false;" class="gnb-txt-event" title="이벤트">이벤트</a>
                <div class="gnb-depth2">
                    <ul>
                        <li><a href="javascript:void(0)" onclick="NetfunnelChk.aTag('EVENT_LIST','/event');return false;"		title="진행중 이벤트">진행중 이벤트</a></li>
                        <li><a href="javascript:void(0)" onclick="NetfunnelChk.aTag('EVENT_LIST','/event/end');return false;"	title="지난 이벤트">지난 이벤트</a></li>
                        <li><a href="javascript:void(0)" onclick="NetfunnelChk.aTag('EVENT_LIST','/event/winner/list');return false;"	title="당첨자발표">당첨자발표</a></li>
                    </ul>
                </div>
            </li>
            <li><a href="javascript:void(0)" onclick="NetfunnelChk.aTag('STORE_LIST','/store');return false;" class="gnb-txt-store" title="스토어">스토어</a></li>
            <li><a href="../benefit/membership.html" class="gnb-txt-benefit" title="혜택">혜택</a>
                <div class="gnb-depth2">
                    <ul>
                        <li><a href="../benefit/membership.html" title="메가박스 멤버십">메가박스 멤버십</a></li>
                        <li><a href="../benefit/discount/guide.html" title="제휴/할인">제휴/할인</a></li>
                    </ul>
                </div>
            </li>
        </ul>
    </nav>
    <!--// gnb -->
    <script type="text/javascript">
        $(document).ready(function() {
            var filmCheck = MegaboxUtil.Common.moveMovieFilmCheckGnb(); // 영화제 존재여부 체크
            if(filmCheck == true){
                $("#festivalArea").show();
            }else{
                $("#festivalArea").hide();
            }
        });
    </script>
    <!--// topGnb -->

    <!-- 레이어 : 사이트맵 -->
    



	<div id="layer_sitemap" class="header-layer layer-sitemap">
        <!-- wrap -->
        <div class="wrap">
            <a href="#" class="link-acc" title="사이트맵 레이어 입니다.">사이트맵 레이어 입니다.</a>

            <p class="tit">SITEMAP</p>

            <div class="list position-1">
                <p class="tit-depth">영화</p>

                <ul class="list-depth">
                    <li><a href="../movie.html" title="전체영화">전체영화</a></li>
                    <li><a href="../curation/specialcontent.html" title="큐레이션">큐레이션</a></li>
                    <li><a href="javascript:void(0)" onclick="javascript:MegaboxUtil.Common.moveMovieFilmCheck();" title="영화제">영화제</a></li>
                    <li><a href="../moviepost/all.html" title="무비포스트">무비포스트</a></li>
                </ul>
            </div>

            <div class="list position-2">
                <p class="tit-depth">예매</p>

                <ul class="list-depth">
                    <li><a href="../booking.html" title="빠른예매">빠른예매</a></li>
                    <li><a href="timetable.html" title="상영시간표">상영시간표</a></li>
                    <li><a href="privatebooking.html" title="더 부티크 프라빗 예매">더 부티크 프라이빗 예매</a></li>
                    <!-- <li><a href="/booking?megaboxLanguage=en" title="English Ticketing">English Ticketing</a></li> -->
                </ul>
            </div>

            <div class="list position-3">
                <p class="tit-depth">극장</p>

                <ul class="list-depth">
                    <li><a href="../theater/list.html" title="전체극장">전체극장</a></li>
                    <li><a href="../specialtheater/list.html" title="특별관">특별관</a></li>
                </ul>
            </div>

            <div class="list position-4">
                <p class="tit-depth">이벤트</p>

                <ul class="list-depth">
                    <li><a href="javascript:void(0)" onclick="NetfunnelChk.aTag('EVENT_LIST','/event');return false;" title="진행중 이벤트">진행중 이벤트</a></li>
                    <li><a href="javascript:void(0)" onclick="NetfunnelChk.aTag('EVENT_LIST','/event/end');return false;" title="지난 이벤트">지난 이벤트</a></li>
                    <li><a href="javascript:void(0)" onclick="NetfunnelChk.aTag('EVENT_LIST','/event/winner/list');return false;" title="당첨자발표">당첨자발표</a></li>
                </ul>
            </div>

            <div class="list position-5">
                <p class="tit-depth">스토어</p>

                <ul class="list-depth">
                    <li><a href="javascript:void(0)" onclick="NetfunnelChk.aTag('STORE_LIST','/store');return false;" title="새로운 상품">새로운 상품</a></li>
                    <li><a href="javascript:void(0)" onclick="NetfunnelChk.aTag('STORE_LIST','/store/megaticket');return false;" title="메가티켓">메가티켓</a></li>
                    <li><a href="javascript:void(0)" onclick="NetfunnelChk.aTag('STORE_LIST','/store/megachance');return false;" title="메가찬스">메가찬스</a></li>
                    <li><a href="javascript:void(0)" onclick="NetfunnelChk.aTag('STORE_LIST','/store/popcorn');return false;" title="팝콘/음료/굿즈">팝콘/음료/굿즈</a></li>
                    <!-- <li><a href="javascript:void(0)" onclick="NetfunnelChk.aTag('STORE_LIST','/store/e-giftcard');return false;" title="기프트카드">기프트카드</a></li> -->
                </ul>
            </div>
            <div class="list position-6">
                <p class="tit-depth">나의 메가박스</p>
                <ul class="list-depth mymage">
                	
            			
            				<li><a href="javascript:movePage('/mypage',						'로그인이 필요한 서비스 입니다. \n로그인하시겠습니까?');" title="나의 메가박스 홈">나의 메가박스 홈</a></li>
		                    <li><a href="javascript:movePage('/mypage/bookinglist',			'로그인이 필요한 서비스 입니다. \n로그인하시겠습니까?');" title="예매/구매내역">예매/구매내역</a></li>
		                    <li><a href="javascript:movePage('/mypage/movie-coupon',		'로그인이 필요한 서비스 입니다. \n로그인하시겠습니까?');" title="영화관람권">영화관람권</a></li>
		                    <li><a href="javascript:movePage('/mypage/store-coupon',		'로그인이 필요한 서비스 입니다. \n로그인하시겠습니까?');" title="스토어교환권">스토어교환권</a></li>
		                    <li><a href="javascript:movePage('/mypage/discount-coupon',		'로그인이 필요한 서비스 입니다. \n로그인하시겠습니까?');" title="할인/제휴쿠폰">할인/제휴쿠폰</a></li>
		                    
		                    <li><a href="javascript:movePage('/mypage/point-list',			'로그인이 필요한 서비스 입니다. \n로그인하시겠습니까?');" title="멤버십포인트">멤버십포인트</a></li>
		                    <li><a href="javascript:movePage('/mypage/moviestory',			'로그인이 필요한 서비스 입니다. \n로그인하시겠습니까?');" title="나의 무비스토리">나의 무비스토리</a></li>
		                    <li><a href="javascript:movePage('/mypage/myevent',				'로그인이 필요한 서비스 입니다. \n로그인하시겠습니까?');" title="나의 이벤트 응모내역">나의 이벤트 응모내역</a></li>
		                    <li><a href="javascript:movePage('/mypage/myinquiry',			'로그인이 필요한 서비스 입니다. \n로그인하시겠습니까?');" title="나의 문의내역">나의 문의내역</a></li>
		                    <li><a href="#" title="자주쓰는 할인 카드">자주쓰는 할인 카드</a></li>
		                    <li><a href="javascript:movePage('/on/oh/ohh/Mypage/mainPage.do?returnURL=info','로그인이 필요한 서비스 입니다.');" title="회원정보">회원정보</a></li>
            			
            			
            		
                </ul>
            </div>

            <div class="list position-7">
                <p class="tit-depth">혜택</p>

                <ul class="list-depth">
                    <li><a href="../benefit/membership.html" title="멤버십 안내">멤버십 안내</a></li>
                    <li><a href="../benefit/viplounge.html" title="VIP LOUNGE">VIP LOUNGE</a></li>
                    <li><a href="../benefit/discount/guide.html" title="제휴/할인">제휴/할인</a></li>
                </ul>
            </div>

            <div class="list position-8">
                <p class="tit-depth">고객센터</p>

                <ul class="list-depth">
                    <li><a href="../support.html" 			title="고객센터 홈">고객센터 홈</a></li>
                    <li><a href="../support/faq.html"		title="자주묻는질문">자주묻는질문</a></li>
                    <li><a href="../support/notice.html"	title="공지사항">공지사항</a></li>
                    <li><a href="../support/inquiry.html"	title="1:1문의">1:1문의</a></li>
                    <li><a href="../support/rent.html"		title="단체/대관문의">단체/대관문의</a></li>
                    <li><a href="../support/lost.html"		title="분실물문의">분실물문의</a></li>
                </ul>
            </div>

            <div class="list position-9">
                <p class="tit-depth">회사소개</p>

                <ul class="list-depth">
                    <li><a href="../megaboxinfo.html" 			target="_blank" title="메가박스소개">메가박스소개</a></li>
                    <li><a href="../socialcontribution.html" 	target="_blank" title="사회공헌">사회공헌</a></li>
                    <li><a href="../advertize.html" 			target="_blank" title="홍보자료">홍보자료</a></li>
                    <li><a href="../partner.html" 				target="_blank" title="제휴/부대사업문의">제휴/부대사업문의</a></li>
                    <li><a href="../onlinereport.html" 		target="_blank" title="온라인제보센터">온라인제보센터</a></li>
                    <li><a href="../ir.html" 					target="_blank" title="자료">IR자료</a></li>
                    <li><a href="../recruit.html" 				target="_blank" title="인재채용림">인재채용</a></li>
                    <li><a href="https://jebo.joonganggroup.com/main.do" target="_blank" title="윤리경영">윤리경영</a></li>
                </ul>
            </div>

            <div class="list position-10">
                <p class="tit-depth">이용정책</p>

                <ul class="list-depth">
                    <li><a href="../support/terms.html"		title="이용약관">이용약관</a></li>
                    <li><a href="../support/privacy.html"		title="개인정보처리방침">개인정보처리방침</a></li>
                    <li><a href="../support/screenrule.html"	title="스크린수배정에관한기준">스크린수배정에관한기준</a></li>
                </ul>
            </div>

            <div class="ir">
                <a href="#" class="layer-close" title="레이어닫기">레이어닫기</a>
            </div>
        </div>
        <!--// wrap -->
    </div>
    <!--// 레이어 : 사이트맵 -->

    <!-- 레이어 : 검색 -->
    <div id="layer_header_search" class="header-layer layer-header-search"></div>
    <!--// 레이어 : 검색 -->

    <!-- 레이어 : 마이페이지 -->
    



	<div id="layer_mymega" class="header-layer layer-mymege">
    	<a href="#" class="ir" title="나의 메가박스 레이어 입니다.">나의 메가박스 레이어 입니다.</a>

        <!-- wrap -->
        <div class="wrap" style="display:none">

            <div class="login-after">
                <div class="user-info">
                    <p class="txt">안녕하세요!</p>

                    <p class="info">
                        <!--
                            vip 일때만 출력
                            vip 아닐때는 태그 자체 삭제
                        -->
                       <em class="vip">VIP PREMIUM</em>
                        <em class="name"></em>
                        <span>회원님</span>
                    </p>

                    <div class="last-date">마지막 접속일 : <em></em></div>

                    <!-- vip, 멤버십 없을때는 미 출력  -->
                    <div class="membership">
                        <!-- <i class="iconset ico-header-vip"></i>
                        <i class="iconset ico-header-film"></i>
                        <i class="iconset ico-header-classic"></i> -->
                    </div>

                    <div class="btn-fixed">
                        <a href="../index.html" class="button" title="나의  메가박스">나의  메가박스</a>
                    </div>
                </div>

                <div class="box">
                    <div class="point">
                        <p class="tit">Point</p>

                        <p class="count">
                            0
                        </p>

                        <div class="btn-fixed">
                            <a href="../index.html" class="button" title="멤버십 포인트" >멤버십 포인트</a>
                        </div>
                    </div>
                </div>

                <div class="box">
                    <div class="coupon">
                        <p class="tit">쿠폰/관람권 <!-- <i class="iconset ico-header-new"></i> --></p>

                        <p class="count">
                            <em title="쿠폰 수" class="cpon">0</em>
                            <span title="관람권 수" class="movie">0</span>
                        </p>

                        <div class="btn-fixed">
                            <a href="../index.html" class="button" title="쿠폰">쿠폰</a>
                            <a href="../index.html" class="button" title="관람권">관람권</a>
                        </div>
                    </div>
                </div>

                <div class="box">
                    <div class="reserve">
                        <p class="tit">예매 <!-- <i class="iconset ico-header-new"></i> --></p>

                        <p class="txt"></p>

                        <div class="btn-fixed">
                            <a href="../index.html" class="button" title="예매내역">예매내역 </a>
                        </div>
                    </div>
                </div>

                <div class="box">
                    <div class="buy">
                        <p class="tit">구매 <!-- <i class="iconset ico-header-new"></i> --></p>

                        <p class="count">
                            <em>0</em>
                            <span>건</span>
                        </p>
                    </div>

                    <div class="btn-fixed">
                        <a href="../index.html?tab=02" class="button" title="구매내역">구매내역</a>
                    </div>
                </div>
            </div>

        	<!-- 로그인 전 -->
            <div class="login-before">
                <p class="txt">
                    로그인 하시면 나의 메가박스를 만날 수 있어요.<br />
                    영화를 사랑하는 당신을 위한 꼭 맞는 혜택까지 확인해 보세요!
                </p>

                <div class="mb50">
                    <a href="#layer_login_common" id="moveLogin" title="로그인" class="button w120px btn-modal-open" w-data='850' h-data='484'>로그인</a>
                </div>

                <a href="../join.html" class="link" title="혹시 아직 회원이 아니신가요?">혹시 아직 회원이 아니신가요?</a>
            </div>
        </div>
        <!--// wrap -->

        <div class="ir">
            <a href="#" class="layer-close" title="레이어닫기">레이어닫기</a>
        </div>
	</div>
    <!--// 레이어 : 마이페이지 -->

</header>
<!--// header -->

<!-- 		<div id="bodyContent"> -->
        



<style type="text/css">
	/* FDK 결제용 CSS */
	/*
	table { margin: 1em; border-collapse: collapse; }
	td, th { padding: .3em; border: 1px #ccc solid; font-size:12px; }
	thead { background: #fc9; }
	thead .white { background: #fff; }
	input { background-color: #ffffff; border: #bbbbbb 1px solid; font-size: 9pt; height: 20px; width: 250px;}
	select { background-color: #ffffff; border-bottom: #a5a4a4 1px solid; border-left: #a5a4a4  1px solid; border-right: #a5a4a4  1px solid; border-top: #a5a4a4 1px solid; font-size: 9pt; height: 20px }
	*/

	/* LAYER POPUP STYLE START */
	.fdLayer {display:none; position: absolute; left: 50%; height:auto;  background-color:#fff; border: 5px solid rgb(0, 66, 101); z-index: 10;}
	.fdLayer .fdContainer {padding: 3px;}
	.fdLayer .fdBtn {width: 100%; margin:10px 0 0; padding-top: 10px; border-top: 1px solid #DDD; text-align:right;}
	a.closeBtn {display:inline-block; height:25px; padding:0 14px 0; border:1px solid #304a8a; background-color:rgb(0, 32, 61); font-size:13px; color:#fff; line-height:25px;}
	a.closeBtn:hover {border: 1px solid #091940; background-color:#1f326a; color:#fff;}
	#mask { position:absolute; left:0; top:0; z-index:9; background-color:#000; display:none;}
	/* LAYER POPUP STYLE END */
</style>
<script type="text/javascript">
var bOnLoadPage = true;
var crtDe = "";

var _init = {
		cache	: Date.now(),
		path	: '../../../static/pc/js/'
};

$(function(){
	crtDe = '20200707';	//서버일자
	$('#todayDate').val(crtDe.maskDate());

	$('.payment-agree').hide();

	fn_playDateList(bOnLoadPage);	//날짜조회

	// 날짜 선택
	$(document).on('click', '.date-box ul li button', function(e){
		e.preventDefault();
		$(this).closest('.date-box').find('li').removeClass('on');
		$(this).parent().addClass('on');

		fn_playTimeList($(this));
		fn_playMovieList($(this));

		// 초기화
		$("#selectTime").html("<span>일시</span> 원하시는 시간을 선택해 주세요"); // 원하시는 시간을 선택해 주세요
		$("#selectMovie").html("<span>영화</span> 원하시는 영화를 선택해 주세요"); // 원하시는 영화를 선택해 주세요
		$("#seatViewFormPlaySchdlNo").val('');
		$("#movieNo").val('');
		$("#movieGrade").val('');
		$('.payment-box .price').find('em').text("0");
		$('.payment-agree').hide();
		$("#rdoPayCredit").prop("checked",true);


	});

	// 시간 선택
	$(document).on('click', '.time-sel :radio', function(e){
		var dateVal = $('.date-box .list .on button').text();
		var timeVal = $("input[name=time]:checked").val();

		timeVal = timeVal.substr(0, 2) + ':' + timeVal.substr(2);
		$("#selectTime").html("<span>일시</span> "+dateVal + " " + timeVal);

		// 결재연동(상영스케줄)
		var playSchdlNo = $(this).attr('play-schdl-no');
		$("#seatViewFormPlaySchdlNo").val(playSchdlNo);

		// 결재금액
		fn_playApprPrice(playSchdlNo);
	});

	// 대관예매 영화 선택
	$(document).on('click', '.choice-movie .cell a', function(e){
		e.preventDefault();
		$(this).closest('.cell').addClass('on').siblings('.cell').removeClass('on');

		var movieNm = $(this).attr('movie-nm');
		var movieGrade = $(this).attr('movie-grade');
		var playKindNm = $(this).attr('play-kind-nm');
		var imagePath = $(this).find('img').attr('src');

		// 결재:영화명 설정
		$("#selectMovie").html("<span>영화</span> "+movieNm);

		// 결제:상영타입 설정
		$("#playKindNm").html(playKindNm);

		// 결재연동(영화정보)
		var movieNo = $(this).attr('movie-no');
		$("#movieNo").val(movieNo);

		$("#movieGrade").val(movieGrade);

		// 관람등급 체크박스 문구 설정
		var movieGradeDesc1 = "";
		var movieGradeDesc2 = "";

		if ("AD01" == movieGrade) { // 전체관람가

		} else if ("AD02" == movieGrade) { // 12세이상관람가
			movieGradeDesc1 = '선택하신 영화는 12세 이상 관람가입니다.'; // 선택하신 영화는 12세 이상 관람가입니다.
			movieGradeDesc2 = '만 12세 미만의 고객님은(영,유아포함) 반드시 부모님 또는 성인 보호자의 동반하에 관람이 가능 합니다.'; // 만 12세 미만의 고객님은(영,유아포함) 반드시 부모님 또는 성인 보호자의 동반하에 관람이 가능 합니다.
		} else if ("AD03" == movieGrade) { // 15세이상관람가
			movieGradeDesc1 = '선택하신 영화는 15세 이상 관람가입니다.'; // 선택하신 영화는 15세 이상 관람가입니다.
			movieGradeDesc2 = '만 15세 미만의 고객님은(영,유아포함) 반드시 부모님 또는 성인 보호자의 동반하에 관람이 가능 합니다.'; // 만 15세 미만의 고객님은(영,유아포함) 반드시 부모님 또는 성인 보호자의 동반하에 관람이 가능 합니다.
		} else if ("AD04" == movieGrade) { // 청소년관람불가
			movieGradeDesc1 = '선택하신 영화는 청소년 관람불가입니다.'; // 선택하신 영화는 청소년 관람불가입니다.
			movieGradeDesc2 = '본 영화는 보호자를 동반하여도 만 18세 미만의 고객님은 (영,유아포함) 영화관람이 불가하며, 만 18세 이상이라도 고등학교 재학중인 고객님은 영화관람이 불가합니다.'; // 본 영화는 보호자를 동반하여도 만 18세 미만의 고객님은 (영,유아포함) 영화관람이 불가하며, 만 18세 이상이라도 고등학교 재학중인 고객님은 영화관람이 불가합니다.
		} else if ("AD06" == movieGrade) { // TODO 미정
			movieGradeDesc1 = '미정';
			movieGradeDesc2 = '미정';
		}

		var appendHtml = "";
		var obj = null;
		obj = $('.payment-agree');
		obj.empty(); //초기화

		//if ("AD01" != movieGrade && "AD06" != movieGrade) {
		if ("AD02" == movieGrade || "AD03" == movieGrade || "AD04" == movieGrade) {
			appendHtml += "<input type=\"checkbox\" id=\"agree\"> ";
			appendHtml += "<label for=\"agree\">" + movieGradeDesc1 + "</label><br> " + movieGradeDesc2;

			obj.append(appendHtml);

			$('.payment-agree').show();
		} else {
			$('.payment-agree').hide();
		}

		$('#smallImage').attr('src', imagePath);
		$('#smallImage').attr('alt', movieNm);

	});

	// 식음료 상품상세
	$(document).on('click', '.food-tit .btn button', function(e){
		e.preventDefault();
		$(this).toggleClass('on');
		$(this).closest('.food-add').find('.food-wrap').toggleClass('on');
	});


	//결제버튼 클릭
	$("#btn_private_credit, #btn_private_mcoupon, #btn_private_scoupon, #btn_private_annus").on('click', function() {
		privateBooking();
	});

	//fdk결제창, 관람권 닫기 버튼 클릭
	$('#fdpayWin a.closeBtn, #layer_private_mcoupon .close-layer, #layer_private_scoupon .close-layer, #layer_private_annus .close-layer,'+
	  '#layer_private_mcoupon .btn-modal-close, #layer_private_scoupon .btn-modal-close, #layer_private_annus .btn-modal-close').on('click', function() {
		deleteRedis();
	});

	//라디오 버튼 선택
	$("input:radio[name='rdo_pay']").on('click', function() {
		var idx = $("input:radio[name='rdo_pay']:checked").index('[name="rdo_pay"]');

		$('.btn-group>.large').eq(idx).css({'display':'inline-block'});
		$('.btn-group>.large').eq(idx).siblings().hide();
	});

	// 식음료 신청하기 클릭
	$('input:checkbox[id=chk_drank_add]').click(function(){
		if ($('input:checkbox[id=chk_drank_add]').is(":checked")) {
			gfn_alertMsgBox('<strong class="font-purple">식음료 상품을 신청하셨습니다.</strong><br><br>예매완료 후 신청확인을 위해 해당 극장에서 유선연락이 진행됩니다.<br>상품에 대한 결제는 현장방문 시 진행되오니 이용에 참고하시기 바랍니다.'); // 식음료 상품을 신청하셨습니다. 예매완료 후 신청확인을 위해 해당 극장에서 유선연락이 진행됩니다. 상품에 대한 결제는 현장방문 시 진행되오니 이용에 참고하시기 바랍니다.
		}
	});

});

// 상영날짜 목록
function fn_playDateList(onloadAt){
	//param 온로드

	paramData = { playDate:$('#todayDate').val().replaceAll( ".", "") };

	$.ajaxMegaBox({
		url: "/on/oh/ohb/BoutiqPrivate/playDateList.do",
		data: JSON.stringify(paramData),
		success: function (data, textStatus, jqXHR) {
			fn_playDateListUpt(data.dateList);

		},
		error: function(xhr,status,error){
			var err = JSON.parse(xhr.responseText);
			alert(xhr.status);
			alert(err.message);
		},
		complete: function() {
			if(bOnLoadPage){
				$('#playDateList button:eq(0)').trigger("click");
			}
		}
	});
}

// 상영날짜 갱신
function fn_playDateListUpt(list){
	var appendHtml = "";
	var obj = null;

	obj = $('#playDateList .list');

	obj.empty();	//초기화

	if(0 < list.length){
		for(var i=0; i<list.length; i++) {
			appendHtml += "<li><button type=\"button\"";
			appendHtml += "\" play-date=\""+list[i].playDe+"\" ";
			appendHtml += ">";
			appendHtml += list[i].dowFullNm;
			appendHtml +="</button></li>";
		}
		obj.append(appendHtml);
	}
}

// 상영시간 목록(매진정보 포함)
function fn_playTimeList(obj){

	$("input:radio[name='time']").prop('checked',false);

	paramData = { playDate:$(obj).attr('play-date') };

	$.ajaxMegaBox({
		url: "/on/oh/ohb/BoutiqPrivate/playTimeList.do",
		data: JSON.stringify(paramData),
		success: function (data, textStatus, jqXHR) {
			fn_playTimeListUpt(data.timeList);
		},
		error: function(xhr,status,error){
			var err = JSON.parse(xhr.responseText);
			alert(xhr.status);
			alert(err.message);
		},
		complete: function() {
			if(bOnLoadPage){
			}
		}
	});
}

// 상영시간 갱신
function fn_playTimeListUpt(list){
	var appendHtml = "";
	var obj = null;

	obj = $('#playTimeList');
	obj.empty(); //초기화

	if(0 < list.length){
		for(var i=0; i<list.length; i++) {
			var soldOutYn = list[i].soldOut;
			var sDisabled = "";

			if (soldOutYn == "Y") { // 매진
				sDisabled = "disabled";
			}

			appendHtml += "<span class=\"time-sel";
			if (soldOutYn == "Y") {
				appendHtml += " soldout";
			}
			appendHtml += "\">";
			appendHtml += "<input type=\"radio\" id=\"t"+(i+1)+"\" name=\"time\" play-schdl-no=\""+list[i].playSchdlNo+"\" brch-no=\""+list[i].brchNo+"\" theab-no=\""+list[i].theabNo+"\" ";
			appendHtml += "value=\"" + list[i].playStartTime.replaceAll( ":", "") + "\" " + sDisabled + ">";
			appendHtml += "<label for=\"t"+(i+1)+"\"><em class=\"font-roboto regular\">" + list[i].playStartTime + "</em> ";
			if (soldOutYn == "Y") {
				appendHtml += "<span>판매완료</span></label>";
			}
			appendHtml += "</span>";
		}
		obj.append(appendHtml);
	}
}

//영화 목록
function fn_playMovieList(obj){

	$("input:radio[name='time']").prop('checked',false);

	paramData = { playDate:$(obj).attr('play-date') };

	$.ajaxMegaBox({
		url: "/on/oh/ohb/BoutiqPrivate/playMovieList.do",
		data: JSON.stringify(paramData),
		success: function (data, textStatus, jqXHR) {
			fn_playMovieListUpt(data.movieList);
		},
		error: function(xhr,status,error){
			var err = JSON.parse(xhr.responseText);
			alert(xhr.status);
			alert(err.message);
		},
		complete: function() {
			if(bOnLoadPage){
				//$('#playTimeList button:eq(0)').trigger("click");
			}
		}
	});
}

//영화목록 갱신
function fn_playMovieListUpt(list){
	var appendHtml = "";
	var obj = null;

	obj = $('#playMovieList');
	obj.empty(); //초기화

	if(0 < list.length){
		$('.plan-slider-control').show();

		appendHtml += "<div class=\"swiper-wrapper\">";

		for(var i=0; i<list.length; i++) {

			var admisClassCd = list[i].admisClassCd;
			var movieGrade = "";

			if ("AD01" == admisClassCd) { // 전체관람가
				movieGrade = "age-all";
			} else if ("AD02" == admisClassCd) { // 12세이상관람가
				movieGrade = "age-12";
			} else if ("AD03" == admisClassCd) { // 15세이상관람가
				movieGrade = "age-15";
			} else if ("AD04" == admisClassCd) { // 청소년관람불가
				movieGrade = "age-19";
			}

			appendHtml += "<div class=\"cell swiper-slide \" style=\"width: 137.75px; margin-right: 30px;\">";
			appendHtml += "<a href=\"#\" title=\"" + list[i].movieNm + "\" movie-nm=\"" + list[i].movieNm + "\" movie-no=\"" + list[i].movieNo + "\" movie-grade=\""+admisClassCd+"\" play-kind-nm=\""+ list[i].playKindNm+"\">";
			//appendHtml += "<a href=\"#\" movie-nm=\"" + list[i].movieNm + "\" movie-no=\"" + list[i].movieNo + "\" movie-grade=\""+admisClassCd+"\">";
			appendHtml += "<p class=\"img\"><img src=\"" + nvl(list[i].movieImgPath).posterFormat('_420') + "\" alt=\"" + list[i].movieNm + "\" onerror=\"noImg(this);\"/></p>";
			appendHtml += "<p class=\"tit\"><span class=\"movie-grade " + movieGrade + "\">" + list[i].admisClassCdNm + "</span>" + list[i].movieNm + "</p>";
			appendHtml += "<div class=\"btn\">선택</div>";
			appendHtml += "</a>";
			appendHtml += "</div>";
		}
		appendHtml += "</div>";

		obj.append(appendHtml);

		// 대관예매 영화 선택
		if( $('.choice-movie').length > 0 ){

			$cell_leng = $('.choice-movie').find('.cell').length;

			// 대관예매 영화 선택
			if( $cell_leng >= 5 ){
				var plan_store_swiper = new Swiper('.choice-movie', {
					init : false,
					loop : false,
					speed : 300,
					spaceBetween: 30,
					slidesPerView: 4,
					centeredSlides : false,
					navigation : {
						prevEl : '.btn-plan-prev',
						nextEl : '.btn-plan-next',
					},
					ally : {
						enabled : false
					}
				});
			}

			else if( $cell_leng < 5 ){
				$('.plan-slider-control').hide();
				var plan_store_swiper = new Swiper('.choice-movie', {
					init : false,
					loop : false,
					speed : 300,
					spaceBetween: 30,
					slidesPerView: 4,
					centeredSlides : false,
					navigation : false,
					ally : {
						enabled : false
					}
				});
			}

			plan_store_swiper.init();
		}

	} else {
		$('.plan-slider-control').hide();
	}
}

//결재금액
function fn_playApprPrice(playSchdlNo){
	paramData = { playSchdlNo:playSchdlNo };

	$.ajaxMegaBox({
		url: "/on/oh/ohb/BoutiqPrivate/playPriceList.do",
		data: JSON.stringify(paramData),
		success: function (data, textStatus, jqXHR) {
			var apprPrice = data.approvalPrice;
			$('.payment-box .price').find('em').text(apprPrice.format());
		},
		error: function(xhr,status,error){
			var err = JSON.parse(xhr.responseText);
			alert(xhr.status);
			alert(err.message);
		},
		complete: function() {
		}
	});
}

//프라이빗 대관예매
function privateBooking() {
	var mGrade = $('input[name="movieGrade"]').val();

	if ($('input[name="playSchdlNo"]').val() == "") {
		gfn_alertMsgBox({ msg: '관람하실 시간을 선택해주세요. ' });

		$('#btn_private_mcoupon').addClass("no-event");
		$('#btn_private_scoupon').addClass("no-event");
        $('#btn_private_annus').addClass("no-event");

		return;
	}

	if ($('input[name="movieNo"]').val() == "") {
		gfn_alertMsgBox({ msg: '관람하실 영화를 선택해주세요.' });

		$('#btn_private_mcoupon').addClass("no-event");
		$('#btn_private_scoupon').addClass("no-event");
        $('#btn_private_annus').addClass("no-event");

		return;
	}

	if (!$('input:radio[name="rdo_pay"]').is(':checked')) {
		gfn_alertMsgBox({ msg: '결제수단 선택하세요.' });
		return;
	}

	if ("AD02" == mGrade || "AD03" == mGrade || "AD04" == mGrade) {
		if ($(":checkbox[id='agree']").is(':checked') == false) {
			gfn_alertMsgBox({ msg: '상영등급 확인 후 체크해주세요.' });

			$('#btn_private_mcoupon').addClass("no-event");
			$('#btn_private_scoupon').addClass("no-event");
            $('#btn_private_annus').addClass("no-event");

			return;
		}
	}

	$('#btn_private_mcoupon').removeClass("no-event");
	$('#btn_private_scoupon').removeClass("no-event");
    $('#btn_private_annus').removeClass("no-event");

	//결제준비
	preparePayPrivate($("input:radio[name='rdo_pay']:checked").val());
}

//결제 준비
function preparePayPrivate(gubun) {
	var playSchdlNo = $("#seatViewFormPlaySchdlNo").val();
	var totalAmt    = $('.payment-box .price').find('em').text().replaceAll(',', '').nvlNum(0);
	var movieNo     = $('#movieNo').val();
	var drnkAddAt   = $(":checkbox[id='chk_drank_add']").is(':checked')==true?'Y':'N';
	var lastPayMethod = gubun;
	var paramData   = {playSchdlNo:playSchdlNo, totalAmt:totalAmt, movieNo:movieNo, lastPayMethod:lastPayMethod, drnkAddAt:drnkAddAt};

	$.ajaxMegaBox({
        url: "/on/oh/ohz/PayPrivate/preparePrivate.do",
        type: "POST",
        contentType: "application/json;charset=UTF-8",
        dataType: "json",
		data: JSON.stringify(paramData),
		clickLmtChk: true, //중복클릭 방지 실행
        success: function (data, textStatus, jqXHR) {
        	var lastPayInfo = data.returnMap;

        	if (!msgPrivateChk(data)) {
        		return;
        	}

			//거래번호 세팅
			$("#lastPayMethod").val(gubun);
        	$("#transNo").val(data.returnMap.sellTranNo);
        	$("#completeTransNo").val(data.returnMap.sellTranNo);

        	if (gubun == 'credit') {
        		//fdk 결제창 호출
            	fdkPayProc();
        	} else if (gubun == 'mcoupon') {
        		$("#open_layer_private_mcoupon").trigger("click");
        		searchMcouponChg();
        	} else if (gubun == 'scoupon') {
        		$("#open_layer_private_scoupon").trigger("click");
        		searchStoreChg();
        	} else if (gubun == 'annus') {
                $("#open_layer_private_annus").trigger("click");
            }
        },
        error: function(xhr,status,error){
        	var err = JSON.parse(xhr.responseText);
        	//err.statCd 에 따라서 이전화면으로 리턴 가능토록
        	gfn_alertMsgBox({ msg: err.msg });
        	if (gubun == 'mcoupon') {
        		$('#layer_private_mcoupon .close-layer').click();
        	}
        },
        complete: function(xhr){
         	clearLmt(); //중복제한 초기화
        }
	});
}

//결제메시지 체크
function msgPrivateChk(data) {
	//알림메시지 노출
	if (data.statCd != "0") {  //비로그인
		$('#layer_private_mcoupon .close-layer').click();
		$('#layer_private_scoupon .close-layer').click();

		if (data.statCd == "-777") {  //비로그인
			var options        = {};
			options.msg        = '로그인 후 이용가능한 서비스 입니다.\\n로그인 하시겠습니까?';
			//options.msg        = '마케팅 수신 동의일로부터 2년이 경과되어, 수신에 대한 재동의 안내를 시행하고 있습니다. \n메가박스의 다양한 소식 및 이벤트를 받고 싶으시면 수신동의 재설정이 필요합니다.  \n수신동의 재설정을 진행 하시겠습니까?\n\n[수신동의 정보]\n&#39;+lstSmsRcvAgreeDt+&#39;'.replaceAll('\n','<br/>');
			options.confirmFn  = fn_ViewLoginPopupForBoutiq;
// 			options.okBtnTxt     = "확인";
// 		    options.cancelBtnTxt = "다음에 하기";
			options.minWidth  = 400;
			options.minHeight = 300;
			gfn_confirmMsgBox(options);
			return;


    	}
		else {
			if (data.msg != null && data.msg !="") {
				gfn_alertMsgBox({ msg: data.msg });
			}
		}
		return false;
	}

	return true;
}

//로그인 팝업창 호출
function fn_ViewLoginPopupForBoutiq(){
	fn_viewLoginPopup('BoutiqPrivateL','pc','','','N');
}

//데이터 보정 체크
function fn_validDataRevisn(){
	$.ajaxMegaBox({
        url    : "/on/oh/ohg/MbLogin/selectDataRevisn.do",
        //data   : JSON.stringify(paramData),
        success: function(result){
        	var dataRevisnAt = result.resultMap.result;	//로그인 여부

        	//자료보정대상
			if(dataRevisnAt  == "Y"){
				//자료 보정 안내 메세지 표시
				var arguments=result.resultMap.birthDe+' / '+result.resultMap.mblpTelno;

				shwoDataRevisnPopup(arguments);
 			}

        }
    });
}


function shwoDataRevisnPopup(arguments){
    var options = {};
    options.msg        = '고객님의 생년월일, 전화번호가 정상적으로 등록되지 않았습니다.\n해당정보는 현장에서 예매정보 확인시 필요한 정보이므로 업데이트 바랍니다.\n(' + arguments + ')\n\n예매를 계속 진행하시겠습니까?\n';
    options.confirmFn  = fn_mvPage;
    options.okBtnTxt     = "지금변경";
    options.cancelBtnTxt = "계속진행";
    options.minWidth  = 400;
    options.minHeight = 300;
    options.param      = {confirm:"/mypage/myinfo?returnURL=info"};
    gfn_confirmMsgBox(options);
}

//페이지 이동
function fn_mvPage(page){
	location.href=page;
}

//레디스 삭제
function deleteRedis() {
	var transNo = $("#transNo").val();
	var paramData = { transNo:transNo};

	$.ajax({
        url: "/on/oh/ohz/PayPrivate/deleteRedis.do",
        type: "POST",
        contentType: "application/json;charset=UTF-8",
        dataType: "json",
		data: JSON.stringify(paramData),
        success: function (data, textStatus, jqXHR) {
        	//메시지 없음
        },
        error: function(xhr,status,error){
        	var err = JSON.parse(xhr.responseText);
        	//메시지 없음
        }
	});
}

//========================================================================================
//fdk 결제
//========================================================================================
function fdkPayProc() {
	var transNo  = $("#transNo").val();
	var useAmt   = $('.payment-box .price').find('em').text().replaceAll(',', '').nvlNum(0);
	var lastPayMethod = $("#lastPayMethod").val();

	$("#ifrm_transNo").val(transNo);
	$("#ifrm_useAmt").val(useAmt);

	document.ifrm.submit();
	layer_open('fdpayWin');	//"FD_PAY_FRAME" 프레임을 가지고 있는 DIV 영역의 ID를 입력(sample 이용 시 : id="fdpayWin")
}

//레이어 팝업 호출 시 처리
function layer_open(el){
	wrapWindowByMask();			//레이어 팝업 활성화 시 하단 MASKING 처리를 위한 함수

	var fdlayer = $('#' + el);	//레이어의 id를 fdlayer변수에 저장
	fdlayer.fadeIn();			//레이어 실행

	// 화면의 중앙에 레이어를 띄운다.
	fdlayer.css('margin-top' , '-'+fdlayer.outerHeight()/2+'px');
	fdlayer.css('margin-left', '-'+fdlayer.outerWidth()/2+'px');
	fdlayer.center();
	fdlayer.find('a.closeBtn').click(function(e){
		fdlayer.fadeOut();			//'Close'버튼을 클릭하면 레이어가 사라진다.
		e.preventDefault();
		document.getElementById("mask").style.display = "none";	//레이어 팝업 비활성화 시 하단 MASKING 표시 해제
		FD_PAY_FRAME.location.href = "../on/oh/ohz/PayBooking/blank.html";	//빈 페이지로 프레임 영역 변경
	});
}

//레이어 팝업 하단 영역 마스킹 처리(레이어 팝업 호출 시 사용)
function wrapWindowByMask(){
  //화면의 높이와 너비를 구한다.
  var maskHeight = $(document).height();
  var maskWidth  = $(window).width();

  //마스크의 높이와 너비를 화면 것으로 만들어 전체 화면을 채운다.
  $('#mask').css({'width':maskWidth,'height':maskHeight});

  //애니메이션 효과
  $('#mask').fadeIn(1000);
  $('#mask').fadeTo("slow",0.6);
}

//최종결제
function fdkAuthResult(rtncode, rtnmsg, fdtid) {
	//alert("rtncode: " + rtncode + " , rtnmsg:" + rtnmsg + ",fdtid:"+fdtid);
	if (rtncode != '0000') {	//오류시 alert 메시지 팝업 후 레이어 닫기
		gfn_alertMsgBox({ msg: rtnmsg });
		$('#fdpayWin').find('a.closeBtn').click();
		return false;
	}
	var transNo = $("#transNo").val();

	var paramData = {transNo:transNo, Code:rtncode, Msg:rtnmsg , FDTid:fdtid };
	$.ajax({
      	url: "/on/oh/ohz/PayPrivate/execPrivatePayment.do",
      	type: "POST",
      	contentType: "application/json;charset=UTF-8",
      	dataType: "json",
		data: JSON.stringify(paramData),
      	success: function (data, textStatus, jqXHR) {
	      	//최종 결제 테스트

	      	if (data.statCd != "0") {
	      		gfn_alertMsgBox({ msg: data.msg });
	      		$('#fdpayWin').find('a.closeBtn').click();
	      	} else {
	      		//완료페이지 이동
	          	goCompleteBooking();
	      	}

      	},
      	error: function(xhr,status,error){
      		var err = JSON.parse(xhr.responseText);
      		//err.statCd 에 따라서 이전화면으로 리턴 가능토록
      		gfn_alertMsgBox({ msg: err.msg });
      	}
	});
}

//예매 완료 페이지 이동
function goCompleteBooking() {
	var contentUrl = "../index.html";
	$("#returnUrl").val(top.location.pathname);
  	$("#seatViewForm").attr("method","post");
  	$("#seatViewForm").attr("action",contentUrl);
  	$("#seatViewForm").submit();
}

//현금 영수증 팝업 여부 체크
function chkCshRec() {
	var transNo       = $("#transNo").val();
	var paramData     = {transNo:transNo};
	var lastPayMethod = $('#lastPayMethod').val();

	$.ajax({
        url: "/on/oh/ohz/PayBooking/chkCshRecAt.do",
        type: "POST",
        contentType: "application/json;charset=UTF-8",
        dataType: "json",
		data: JSON.stringify(paramData),
        success: function (data, textStatus, jqXHR) {

        	$('#cashBillYn').val('N');
    		$('#cashrecIssueCd').val('');
        	var cshRecInfo = data.cshRecInfo;

        	if (cshRecInfo != null && cshRecInfo != undefined) {
        		var tktCashrecAmt = cshRecInfo.tktCashrecAmt;

				//현금 영수증 금액이 0 이상인 경우
        		if (tktCashrecAmt > 0) {
        			$('#cashBillAmt').text(String(tktCashrecAmt).maskNumber());
        			$('#cash_pop').click();
        		} else {
        			//최종결제
        			execPrivatePayment();
        		}
        	}
        },
        error: function(xhr,status,error){
        	var err = JSON.parse(xhr.responseText);
        	//err.statCd 에 따라서 이전화면으로 리턴 가능토록
        	$('#cashBillYn').val('N');
    		$('#cashrecIssueCd').val('');
    		errBookingChk(err.msg);
        }
	});
}


//최종 결제 실행
function execPrivatePayment() {
	var transNo         = $("#transNo").val();
	var cashBillYn      = $('#cashBillYn').val();
	var cashrecIssueCd  = $('#cashrecIssueCd').val();
	var bizmDivCd       = $(':radio[name="bizmDivCd"]:checked').val();
	var cashBillPhoneNo = $('#cashBillPhoneNo').val();
	var cashrecPubAmt   = $('#cashBillAmt').text().replaceAll(',', '');


	var paramData = { transNo:transNo,
					  cashBillYn:cashBillYn,
	          		  cashrecIssueCd:cashrecIssueCd,
	          		  bizmDivCd:bizmDivCd,
	          		  cashBillPhoneNo:cashBillPhoneNo,
	          		  cashrecPubAmt:cashrecPubAmt };

	$.ajax({
        url: "/on/oh/ohz/PayPrivate/execPrivatePayment.do",
        type: "POST",
        contentType: "application/json;charset=UTF-8",
        dataType: "json",
		data: JSON.stringify(paramData),
        success: function (data, textStatus, jqXHR) {
        	remainAmt = data.returnMap.remainAmt;

        	if (data.statCd != "0") {
        		gfn_alertMsgBox({ msg: data.msg });
        		//경우에 따라서 back 등 결정 필요
        		return;
        	}

        	//예매 완료 페이지 이동
        	goCompleteBooking();
        },
        error: function(xhr,status,error){
        	var err = JSON.parse(xhr.responseText);
        	//err.statCd 에 따라서 이전화면으로 리턴 가능토록
        	gfn_alertMsgBox({ msg: err.msg });
        }
	});
}



jQuery.fn.center = function () {
  this.css("position","absolute");
  this.css("top", Math.max(0, (($(window).height() - $(this).outerHeight()) / 2) + $(window).scrollTop()) + 350 + "px");
  return this;
}



///////////////////////////////////////////////////////////////////////////////
// TODO 스크립트 추가 /////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

$.fn.megaBoxCardNumberCheck = function() {
    $(this).on("keypress",function(e){
        if ( !e.key.isNumber() && e.key != '-') return false;
    })
    $(this).on("focus",function(e){
        $(this).val($('#'+$(this).attr('id')+'_hid').val());
    })
    $(this).on("focusout",function(e){
        var val = $(this).val().replace(/[^0-9]+/g, '');
        $(this).val(val);
        $('#'+$(this).attr('id')+'_hid').val(val);

        var makNo = $(this).val().maskCardNo();
        var varArr = makNo.split('-');
        if (varArr.length > 3) {
            varArr[2] = varArr[2].replaceAll(/[0-9]/g, '*');
        }

        $(this).val(varArr.join("-"));
    })
};



//오류메시지 체크 : 999 로 시작되는 오류 메시지 처음페이지로 리턴
function errBookingChk(msg) {
    //알림메시지 노출
    if (msg != null && msg != "") {
        if (msg.indexOf("999:") == 0) {  //온라인 999 좌석도로
            var almsg = msg.substring(4, msg.length).replaceAll('9999:', '');
            if (almsg == "msg.pay.overPayTime") {  //결제가능 시간이 초과되어 좌석선택부터 다시 진행바랍니다. 메시지는 예매화면에서 팝업한다.(ria 체크 필요)
                goPrePageInitSeat('BookingPay_msg94');
            } else if (almsg == "msg.pay.over.session") {  //결제가능 시간이 초과되어 좌석선택부터 다시 진행바랍니다. 메시지는 예매화면에서 팝업한다.(ria 체크 필요)
                
                var sessMsg = "로그인 가능시간이 초과되었습니다.<br/> 재 로그인 후 이용 바랍니다.";
                gfn_alertMsgBox({ msg: sessMsg, callback:goBookingFrist });
                
                
            } else {
                gfn_alertMsgBox({ msg: almsg, callback:goPrePageInitSeat });
            }
        } else if (msg.indexOf("888:") == 0) {  //온라인 888 예매 처음으로
            var almsg = msg.substring(4, msg.length).replaceAll('9999:', '');
            gfn_alertMsgBox({ msg: almsg, callback:goBookingFrist });
        } else {
            if (msg.indexOf("9999:") == 0) {  //현장용. 9999 제외 메시지 노출
                var almsg = msg.substring(5, msg.length);
                gfn_alertMsgBox({ msg: almsg });
            } else {
                gfn_alertMsgBox({ msg: msg });
            }
        }
    }
}

//메시지 체크
function msgBookingLoginChk(data) {
    //알림메시지 노출
    if (data.statCd == "-777") {  //비로그인
        //메가박스는 예매 또는 상영스케쥴로 이동
        
        gfn_alertMsgBox({ msg: data.msg, callback:goBookingFrist });
        
        //리아는 예매창 닫고 다시 진행 alert
        

        return false;
    } else if (data.statCd == "0") {
        try {
            var chkAddAmt = data.returnMap.chkAddAmt;
            if (chkAddAmt > 0) {
                gfn_alertMsgBox('해당 관람권은 '+String(chkAddAmt).maskNumber()+'원 추가금액 지불시\n관람이 가능합니다.')

            }
        } catch(e) {
            //console.log("추가금액 누락.....");
        }
    }

    return true;
}

//할인내역 적용
function setMovieDcInfo(policyList) {
    $('.price-process > .box').eq(1).find('.data').remove();
    var prependText = '';
    var sumApplyAmt = 0;
    var sumAddAmt   = 0;

    for(var i=0;i<policyList.length;i++) {
        var applyAmt = policyList[i].applyAmt;
        if (applyAmt > 0) {
            prependText = '<div class="data"><span class="tit">' + policyList[i].meanPrnNm;
            if (policyList[i].cponType == 'CMBND' || policyList[i].cponType == 'CPON') {
                prependText += ' <em>' + policyList[i].applyCponCnt + '</em> 매</span>';
            } else {
                prependText += ' <em>' + policyList[i].applyCnt + '</em> 매</span>';
            }

            prependText += '<span class="price">' + String(policyList[i].applyAmt).maskNumber() + '</span>';
            if (policyList[i].methodName == 'skt-normal') {
                prependText += '<button type="button" class="btn-delete" method="skt">삭제</button></div>';
            } else {
                prependText += '<button type="button" class="btn-delete" method="' + policyList[i].methodName + '">삭제</button></div>';
            }

            sumApplyAmt += applyAmt;

            if (policyList[i].applyAddAmt != null && policyList[i].applyAddAmt != undefined) {
                sumAddAmt   += policyList[i].applyAddAmt;
            }

            $('.price-process > .box').eq(1).prepend(prependText);

            if (policyList[i].methodName == 'skt-normal') {
                $('#btn_pay_skt').closest('div').addClass('on')
            } else {
                $('#btn_pay_' + policyList[i].methodName).closest('div').addClass('on')
            }

        } else {

            if (policyList[i].methodName == 'skt-normal') {
                $('#btn_pay_skt').closest('div').removeClass('on')
            } else {
                $('#btn_pay_' + policyList[i].methodName).closest('div').removeClass('on')
            }
        }
    }

    $('.price-process > .box').eq(1).find('.all').find('em').text(sumApplyAmt==0?'0':'-'+String(sumApplyAmt).maskNumber());

    //추가결제금액
    if (sumAddAmt > 0) {
        $('.pay-area > .add-thing').eq(0).find('.money').text( '+' + String(sumAddAmt).maskNumber() );
    } else {
        $('.pay-area > .add-thing').eq(0).find('.money').text( '0' );
    }

    //최종 결제 금액 적용
    setLastPayAmt(policyList);

    //삭제 이벤트 적용
    setCancelEvent();

    if ($('#pre_disc_all_text').text() != '') {  //bc 선할인 초기화
        pre_disc_init();
    }
}



//최종 결제 금액 적용
function setLastPayAmt(policyList) {
    //전체금액
    var allSumAmt = parseInt($('.price-process > .box').eq(0).find('.all').find('em').text().replaceAll(',', '').nvlNum(0));

    //할인금액
    var allDiscAmt = parseInt($('.price-process > .box').eq(1).find('.all').find('em').text().replaceAll(',', '').replaceAll('-', '').nvlNum(0));

    //추가금액
    var allAddAmt = parseInt($('.pay-area > .add-thing').eq(0).find('.money').text().replaceAll(',', '').replaceAll('-', '').nvlNum(0).replaceAll('+', '').nvlNum(0));

    //최종결제금액
    var remainAmt = allSumAmt + allAddAmt - allDiscAmt;
    $('.pay-area > .pay').eq(0).find('.money').find('em').text( String(remainAmt).maskNumber() );

    //최종 결제 금액 0인경우 disabled 처리
    if (allSumAmt + allAddAmt - allDiscAmt == 0) {
        setAllButtonDispInfo(policyList, 'disable');

        //결제수단 disabled
        $('#lastPayMethod').val('');
        $(':radio[name="radio_payment"]').prop('checked', false);
        $(':radio[name="radio_payment"]').attr('disabled', true);

        $('.select-payment-card').hide();
    } else {
        setAllButtonDispInfo(policyList, 'enable');

        //결제수단 enabled
        $(':radio[name="radio_payment"]').attr('disabled', false);

        if ($('#lastPayMethod').val() == 'credit') {
            $('.select-payment-card').show();
        } else {
            $('.select-payment-card').hide();
        }
    }

    //실시간 변경
    setButtonPolicyInfo(policyList);

    //현대 M 포인트, 문화누리 사용시 결제수단 disabled
    var hyCultApply = '';
    for(var i=0;i<policyList.length;i++) {
        if (('hydm' == policyList[i].methodName || 'culturenuri' == policyList[i].methodName) && policyList[i].applyAmt > 0) {
            hyCultApply = policyList[i].methodName;
            break;
        }
    }

    if (hyCultApply != '') {
        //$('.select-payment > button').attr('disabled', true);
        $(':radio[name="radio_payment"]').attr('disabled', true);

        $('.select-payment-card').hide();

        if ('hydm' == hyCultApply) {
            $('#btn_pay_culturenuri').addClass('disabled');
            $('#btn_pay_hydm').removeClass('disabled');
        } else {
            $('#btn_pay_hydm').addClass('disabled');
            $('#btn_pay_culturenuri').removeClass('disabled');
        }

        $('#lastPayMethod').val('credit');
    }

    //최종 결제수단 명칭 세팅
    changePaymentName(policyList);

}



///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////


</script>
<!-- 레이어 팝업 처리 시 화면 영역 시작 -->
<div id="mask"></div>
<div id="fdpayWin" class="fdLayer">
	<div class="fdContainer">
		<div class="pop-conts">
			<iframe id="FD_PAY_FRAME" name="FD_PAY_FRAME" title="결제팝업창" frameborder="1" width="560" height="600" style="background-color:#FFFFFF;"></iframe>
			<div class="fdBtn">
				<a href="#" title="팝업 닫기" class="closeBtn">Close</a>
			</div>
		</div>
	</div>
</div>
<!-- 레이어 팝업 처리 시 화면 영역 끝 -->

<!-- container -->
<div class="container">

	<!-- 페이지 타이틀 마크업 완전 변경 class 주의 -->
	<div class="page-util">
		<div class="inner-wrap">
			<div class="location">
				<span>Home</span>
				<a href="../booking.html" title="예매 페이지로 이동">예매</a>
				<a href="privatebooking.html" title="빠른예매 페이지로 이동">더 부티크 프라이빗 대관예매</a>
			</div>

			<!-- 2019-07-24 include로 변경 -->
			
			<!--// 2019-07-24 include로 변경 -->
		</div>
	</div>

	<!-- contents -->
	<div id="contents" class="pt00">

		<!-- boutique-reserve-top  -->
		<div class="b-reserve-top">
			<div class="inner-wrap">

				<h2 class="tit">코엑스 더 부티크 프라이빗 대관예매</h2>

				<div class="b-reserve-box">
					<div id="playDateList" class="box-item date">
						<p class="tit">날짜</p>
						<div class="date-box m-scroll">
							<ul class="list">
								<!-- <li><button type="button">2019-05-31(금)</button></li> -->
							</ul>
						</div>
					</div>

					<div class="box-item time">
						<p class="tit">시간</p>
						<!-- 매진일때만 label 안에  <span>매진</span>  추가 -->
						<div id="playTimeList" class="boutique-time">

							<!--
							<span class="time-sel">
								<input type="radio" id="t1" name="time">
								<label for="t1"><em class="font-roboto regular">10:00</em> <span>매진</span></label>
							</span>
							<span class="time-sel">
								<input type="radio" id="t2" name="time">
								<label for="t2"><em class="font-roboto regular">14:00</em></label>
							</span>
							<span class="time-sel">
								<input type="radio" id="t3" name="time">
								<label for="t3"><em class="font-roboto regular">18:00</em></label>
							</span>
							<span class="time-sel">
								<input type="radio" id="t4" name="time">
								<label for="t4"><em class="font-roboto regular">22:00</em></label>
							</span>
							-->

						</div>
					</div>

					<div class="box-item movie">
						<p class="tit">영화</p>
						<!-- chice-movie -->
						<div class="choice-movie-wrap">
							<div id="playMovieList" class="choice-movie">
								<div class="swiper-wrapper">
									
										<div class="cell swiper-slide">
											<a href="#" title="slide">

											</a>
										</div>
									
										<div class="cell swiper-slide">
											<a href="#" title="slide">

											</a>
										</div>
									
										<div class="cell swiper-slide">
											<a href="#" title="slide">

											</a>
										</div>
									
										<div class="cell swiper-slide">
											<a href="#" title="slide">

											</a>
										</div>
									
										<div class="cell swiper-slide">
											<a href="#" title="slide">

											</a>
										</div>
									
								</div>
							</div>

							<div class="plan-slider-control">
								<button type="button" class="btn-plan-prev">이전 배너 보기</button>
								<button type="button" class="btn-plan-next">다음 배너 보기</button>
							</div>
						</div>
						<!--// chice-movie -->
					</div>
				</div>


			</div>
		</div>
		<!--// boutique-reserve-top -->

		<div class="b-reserve-bot mt70">
			<div class="inner-wrap">
				<h3 class="tit">식음료 추가</h3>

				<div class="food-add">
					<div class="food-tit">
						<div class="block chk"><input type="checkbox" id="chk_drank_add" title="식음료 추가 신청하기"/> <label for="chk_drank_add">신청하기</label></div>
						<div class="block txt"><p>더 부티크 프라이빗에서는 영화 관람과 함께 다양한 식음료를 즐길 수 있습니다.<br />식음료 상품을 원하시면 신청하기를 체크해 주세요!</p></div>
						<div class="block btn"><button type="button" class="">상품상세</button></div>
					</div>

					<div class="food-wrap">
						<div class="item">
							<div class="img"><img src="../static/pc/images/reserve/img-addfood01.png" alt="크래프트비어 세트" /></div>
							<div class="food-info">
								<div class="name-area">
									<p class="name">크래프트비어 세트</p>

									<p class="price">
										<em>200,000</em>
										<span>원</span>
									</p>
								</div>

								<ul class="dot-list gray">
									<li>크레프트 비어 8잔</li>
									<li>소시지앤프렌치빈 2개</li>
									<li>반반팝콘 4개</li>
									<li>치킨 앤 칩스 2개</li>
									<li>치즈플레이트 2개</li>
									<li>프렌치프라이 2개</li>
									<li>크리스피쉬림프 2개</li>
									<li>치즈살사 나쵸 2개</li>
								</ul>
							</div>
						</div>

						<div class="item">
							<div class="img"><img src="../static/pc/images/reserve/img-addfood02.png" alt="풀보틀와인 세트" /></div>
							<div class="food-info">
								<div class="name-area">
									<p class="name">풀보틀와인 세트</p>

									<p class="price">
										<em>200,000</em>
										<span>원</span>
									</p>
								</div>

								<ul class="dot-list gray">
									<li>풀보틀와인 2병</li>
									<li>소시지앤프렌치빈 2개</li>
									<li>반반팝콘 4개</li>
									<li>치킨 앤 칩스 2개</li>
									<li>치즈플레이트 2개</li>
									<li>프렌치프라이 2개</li>
									<li>크리스피쉬림프 2개</li>
									<li>치즈살사 나쵸 2개</li>
								</ul>
							</div>
						</div>

						<div class="item">
							<div class="img"><img src="../static/pc/images/reserve/img-addfood03.png" alt="플레이팅 세트" /></div>
							<div class="food-info">
								<div class="name-area">
									<p class="name">플레이팅 세트</p>

									<p class="price">
										<em>100,000</em>
										<span>원</span>
									</p>
								</div>

								<ul class="dot-list gray">
									<li>소시지앤프렌치빈 2개</li>
									<li>반반팝콘 4개</li>
									<li>치킨 앤 칩스 2개</li>
									<li>치즈플레이트 2개</li>
									<li>프렌치프라이 2개</li>
									<li>크리스피쉬림프 2개</li>
									<li>치즈살사 나쵸 2개</li>
								</ul>
							</div>
						</div>
					</div>
				</div>

				<h3 class="tit mt70">결제</h3>

				<div class="payment-box">
					<div class="payment-con">
						<div class="inner-con">
							<p class="img"><img id="smallImage" src="#" alt="" /></p>

								<ul class="dot-list gray">
									<li><span>극장</span> 코엑스 더 부티크 프라이빗관</li>
									<li id="selectTime"></li>
									<li id="selectMovie" class="tit"></li>
									<li id="playKindNm" class="movie-mode"></li>
								</ul>
						</div>

						<div class="righten">
							<div class="top">
								<p class="tit">결제수단</p>

								<input type="radio" id="rdoPayCredit" name="rdo_pay" value="credit"/> <label for="rdoPayCredit"  class="w100">신용/체크카드</label>
								<input type="radio" id="rdoPayMCoupon" name="rdo_pay" value="mcoupon"/> <label for="rdoPayMCoupon"  class="w140">프라이빗 관람권</label><br>
								<input type="radio" id="rdoPaySCoupon" name="rdo_pay" value="scoupon"/> <label for="rdoPaySCoupon" class="w100">스토어 교환권</label>


                                <!--  /////////////////////////////////////////////////// -->
                                <!--  TODO  결제수단 추가 (메가박스 아너스 카드) -->
                                <input type="radio" id="rdoPayAnnus" name="rdo_pay" value="annus"/> <label for="rdoPayAnnus" class="w140">메가박스 아너스카드</label>
                                <!-- 결제수단 추가 종료 -->
                                <!--  /////////////////////////////////////////////////// -->

							</div>

							<div class="bottom">
								<p class="tit">최종 결제금액</p>

								<p class="price">
									<em>0</em>
									<span>원</span>
								</p>
							</div>
						</div>
					</div>

					<div class="payment-agree">
						<!--
						<input type="checkbox" id="agree">
						<label for="agree">선택하신 영화는 12세 이상 관람가입니다.</label> 만 12세 미만의 고객님은 (영,유아포함) 반드시 부모님 또는 성인 보호자의 동반 하에 관람이 가능합니다.
						-->
					</div>
				</div>

				<div class="btn-group pt40">
					<button type="button" class="button purple large" id="btn_private_credit" name="btn_private_pay">결제하기</button>

					<a href="javaScript:void(0)" title="결제하기" class="button purple large" id="btn_private_mcoupon" name="btn_private_pay" style="display:none;">결제하기</a>
					<a href="javaScript:void(0)" title="결제하기" class="button purple large" id="btn_private_scoupon" name="btn_private_pay" style="display:none;">결제하기</a>
                    <a href="javaScript:void(0)" title="결제하기" class="button purple large" id="btn_private_annus" name="btn_private_pay" style="display:none;">결제하기</a>
					<div style="display:none;">
						<a href="#layer_private_mcoupon" title="결제하기" w-data="600" h-data="550" class="button purple large btn-modal-open" id="open_layer_private_mcoupon" >결제하기</a>
						<a href="#layer_private_scoupon" title="결제하기" w-data="600" h-data="550" class="button purple large btn-modal-open" id="open_layer_private_scoupon" >결제하기</a>
                        <a href="#layer_private_annus" title="결제하기" w-data="600" h-data="550" class="button purple large btn-modal-open" id="open_layer_private_annus" >결제하기</a>
					</div>

				</div>

				<!-- 레이어 : 프라이빗 관람권 -->
				





<script type="text/javascript">
var mcouponChgList = new Array();

//초기화 공통 sMethodName.init
function mcoupon_init() {
	setInitMcouponChg();
	mcouponChgList = new Array();
	$('#mcouponNo').val('');
	$('#mcouponCertNo').val('');
}

$(function() {
	//영화관람권 문자만 사용
	$("#mcouponCertNo").megaBoxNumberCheck();

	//교환권 등록버튼 클릭
	$('#btn_reg_mcoupon').on('click', function() {
		registMcoupon();
	});

	//적용버튼 클릭
	$('#btn_apply_mcoupon').on('click', function() {
		applyMcouponChg();
	});


});

//영화관람권 존재여부
function getInitMcouponChgCnt() {
	return $('#layer_private_mcoupon .table-wrap > table > tbody> tr').length;
}

//영화관람권 초기화
function setInitMcouponChg() {
	$('#layer_private_mcoupon .table-wrap > table > tbody> tr').remove();
}

//영화관람권 등록
function registMcoupon() {
	//초기화
	var transNo     = $("#transNo").val();
	var mcouponNo   = $("#mcouponNo").val();
	var mcouponCertNo = $("#mcouponCertNo").val();

	//영화관람권 자릿수 체크
	if (mcouponNo.length != 12) {

		gfn_alertMsgBox({ msg:'메가박스 관람권 번호 12자리를  입력하세요.'});	//영화관람권 12자리를 입력하세요
		$("#mcouponNo").focus();
		return;
	}

	//인증번호
	if (mcouponCertNo.length != 4) {
		gfn_alertMsgBox({ msg:'인증번호 번호 4자리를  입력하세요.'});	//인증번호 4자리를 입력하세요
		$("#mcouponNo").focus();
		return;
	}

	//기 조회여부 체크
	for(var i=0;i<mcouponChgList.length;i++) {
		if (mcouponNo.substring(0, 12) == mcouponChgList[i].cmbndNo) {
			gfn_alertMsgBox({ msg:'이미 조회 되었습니다.'});
			return;
		}
	}
	var scouponNo  = mcouponNo + mcouponCertNo;
	var methodName = "mcoupon";
	var paramData  = {scouponNo:scouponNo, methodName:methodName };
	$.ajax({
        url: "/on/oh/ohz/PayPrivate/registVcCmbnd.do",
        type: "POST",
        contentType: "application/json;charset=UTF-8",
        dataType: "json",
		data: JSON.stringify(paramData),
        success: function (data, textStatus, jqXHR) {
			if (data.resultStatus == 'Y') {
				addMcouponChg(mcouponNo.substring(0, 12));
			} else {
				gfn_alertMsgBox({ msg:'기명처리 불가한 교환권입니다.'});
			}
        },
        error: function(xhr,status,error){
        	var err = JSON.parse(xhr.responseText);
        	//err.statCd 에 따라서 이전화면으로 리턴 가능토록
        	gfn_alertMsgBox({ msg:err.msg});
        }
	});

}

//영화관람권 추가
function addMcouponChg(mcouponNo) {
	//초기화
	var transNo     = $("#transNo").val();
	var paramData  = {transNo:transNo, cmbndNo:mcouponNo };

	$.ajax({
        url: "/on/oh/ohz/PayPrivate/searchMovieCpon.do",
        type: "POST",
        contentType: "application/json;charset=UTF-8",
        dataType: "json",
		data: JSON.stringify(paramData),
        success: function (data, textStatus, jqXHR) {
        	//쿠폰 전역변수 세팅
        	var vcCmbndList = data.vcCmbndList[0];

        	mcouponChgList.push(vcCmbndList);
        	var i = mcouponChgList.length-1;

    		cponListText = '<tr> ';
    		cponListText += '	<td class="a-l">'+mcouponChgList[i].cmbndNm+'</td> ';
    		cponListText += '	<td class="a-l"> ';
    		//cponListText += '		총(0/1) | 주간(0/1) | 월간(0/1)<br /> '; 현재 영어에서 제한횟수 관리가 되고 있지 않음. 추후 추가 필요
    		cponListText += '		'+String(mcouponChgList[i].validStartDe).maskDate()+'~'+String(mcouponChgList[i].validExprDe).maskDate()+' ';
    		cponListText += '	</td> ';
    		cponListText += '	<td><input type="radio" title="영화관람권 사용" name="chkMCpon" idx="'+i+'" cponno="'+mcouponChgList[i].cmbndNo+'"/></td> ';

    		cponListText += '</tr> ';
    		$('#layer_private_mcoupon .table-wrap > table > tbody').append(cponListText);

    		$('#mcouponNo').val('');
    		$('#mcouponCertNo').val('');
        },
        error: function(xhr,status,error){
        	var err = JSON.parse(xhr.responseText);
        	//err.statCd 에 따라서 이전화면으로 리턴 가능토록
        	gfn_alertMsgBox({ msg:err.msg});
        }
	});
}


//영화관람권 조회
function searchMcouponChg() {
	var transNo    = $("#transNo").val();
	var paramData  = {transNo:transNo };

	$.ajax({
        url: "/on/oh/ohz/PayPrivate/searchMovieCpon.do",
        type: "POST",
        contentType: "application/json;charset=UTF-8",
        dataType: "json",
		data: JSON.stringify(paramData),
        success: function (data, textStatus, jqXHR) {

        	//쿠폰 전역변수 세팅
        	mcouponChgList = data.vcCmbndList;

        	//쿠폰 목록 세팅
        	setMcouponChg(mcouponChgList);
        },
        error: function(xhr,status,error){
        	var err = JSON.parse(xhr.responseText);
        	//err.statCd 에 따라서 이전화면으로 리턴 가능토록
        	gfn_alertMsgBox({ msg:err.msg });
        }
	});
}


//영화관람권 목록 세팅
function setMcouponChg(cponList) {
	setInitMcouponChg();
	var cponListText = "";
	for(var i=0;i<cponList.length;i++) {

		cponListText = '<tr> ';
		cponListText += '	<td class="a-l">'+cponList[i].cmbndNm+'</td> ';
		cponListText += '	<td class="a-l"> ';
		//cponListText += '		총(0/1) | 주간(0/1) | 월간(0/1)<br /> '; 현재 영어에서 제한횟수 관리가 되고 있지 않음. 추후 추가 필요
		cponListText += '		'+String(cponList[i].validStartDe).maskDate()+'~'+String(cponList[i].validExprDe).maskDate()+' ';
		cponListText += '	</td> ';
		cponListText += '	<td><input type="radio" title="스토어권 사용" name="chkMCpon" idx="'+i+'" cponno="'+cponList[i].cmbndNo+'"/></td> ';
		cponListText += '</tr> ';

		$('#layer_private_mcoupon .table-wrap > table > tbody').append(cponListText);
	}
}

//영화관람권 적용
function applyMcouponChg() {
	var transNo     = $("#transNo").val();
	var playSchdlNo = $("#playSchdlNo").val();
	var paramCpon   = new Array();
	var idx = $("input:radio[name='chkMCpon']:checked").index('[name="chkMCpon"]');

	if ( idx < 0 ) {
		gfn_alertMsgBox({ msg:'선택된 쿠폰 정보가 없습니다.'});
		return;
	}

	mcouponChgList[idx].transNo = transNo;
	paramCpon.push(mcouponChgList[idx]);

	var paramData = {transNo:transNo, cponList:paramCpon, playSchdlNo:playSchdlNo};
	$.ajax({
        url: "/on/oh/ohz/PayPrivate/applyMovieCpon.do",
        type: "POST",
        contentType: "application/json;charset=UTF-8",
        dataType: "json",
		data: JSON.stringify(paramData),
        success: function (data, textStatus, jqXHR) {

        	if (data.returnMap.remainAmt > 0) {
        		gfn_alertMsgBox({ msg: '해당 관람권을 적용할 수 없습니다.' });
        		$('#layer_private_mcoupon .close-layer').click();
        		return;
        	}

        	$('#layer_private_mcoupon').hide();

        	//현금영수증 팝업여부
        	chkCshRec();
        },
        error: function(xhr,status,error){
        	var err = JSON.parse(xhr.responseText);
        	//err.statCd 에 따라서 이전화면으로 리턴 가능토록
        	gfn_alertMsgBox({ msg: err.msg });
        }
	});
}

</script>


<!-- 레이어 : 메가박스 관람권 -->
<section id="layer_private_mcoupon" class="modal-layer">
	<div class="wrap">
		<header class="layer-header">
			<h3 class="tit">프라이빗 관람권</h3>
		</header>

		<div class="layer-con">
			<div class="reset mb10">
				사용하실 '더 부티크 프라이빗 관람권'을 선택해주세요.<br />
				보유하신 관람권은 등록 후 사용하실 수 있습니다.
			</div>

			<div class="popup-gray mid-info-box">
				<div class="pop-search-area">
					<p class="sh-txt reset"><span class="label">관람권번호</span></p>

					<div class="sh-input">
						<input type="text" placeholder="관람권번호 12자리" title="메가박스 관람권 번호 입력" class="input-text w150px" id="mcouponNo" maxlength="12"/>
						<input type="text" placeholder="인증번호 4자리" title="메가박스 관람권 인증번호 입력" class="input-text w120px ml05" id="mcouponCertNo" maxlength="4"/>
					</div>

					<div class="sh-btn gray">
						<a href="#layer_private_mcoupon_regi" title="관람권등록 하기" w-data="600" h-data="350" class="button small gray btn-modal-open" id="btn_reg_mcoupon">관람권등록</a>
					</div>
				</div>
			</div>

			<div class="table-wrap">
				<table class="board-list line">
					<caption>영화관람권을 관람권, 유효기간, 사용 순서로 보여주는 표</caption>
					<colgroup>
						<col>
						<col style="width:200px;">
						<col style="width:56px;">
					</colgroup>
					<thead>
						<tr>
							<th scope="col">관람권</th>
							<th scope="col">유효기간</th>
							<th scope="col">사용</th>
						</tr>
					</thead>
					<tbody>
						<!--
						<tr>
							<td class="a-l">
								<strong>관람권명</strong><br />
								1234-5678-1234-****
							</td>
							<td>2019-01-08~2019-01-31</td>
							<td>
								<input type="checkbox" title="사용" />
							</td>
						</tr>
						<tr>
							<td class="a-l">
								<strong>부티크프라이빗 관람권</strong><br />
								1234-5678-1234-****
							</td>
							<td>2019-01-08~2019-01-31</td>
							<td>
								<input type="checkbox" title="사용" />
							</td>
						</tr>
						<tr>
							<td class="a-l">
								<strong>부티크프라이빗 관람권</strong><br />
								1234-5678-1234-****
							</td>
							<td>2019-01-08~2019-01-31</td>
							<td>
								<input type="checkbox" title="사용" />
							</td>
						</tr>
						 -->
					</tbody>
				</table>
			</div>

			<ul class="dash-list mt10">
				<li>더 부티크 프라이빗 관람권만 등록 및 사용 가능합니다.</li>
				<li>등록된 관람권은 '나의 메가박스 > 관람권'에서 확인하실 수 있습니다.</li>
			</ul>

			<!-- 사용할수 없을 때 -->
			<!-- <p class="reset mt10 font-red">사용할 수 없는 관람권 입니다. 고객센터 (1544-0070)으로 문의주세요.</p> -->
		</div>
		<div class="btn-group-fixed">
			<button type="button" class="button close-layer">닫기</button>
			<button type="button" class="button purple" id="btn_apply_mcoupon">결제</button>
		</div>

		<button type="button" class="btn-modal-close">레이어 닫기</button>
	</div>
</section>
<!--// 레이어 : 메가박스 관람권 -->

				<!-- 레이어 : 프라이빗 관람권 -->

				<!-- 레이어 : 스토어 관람권 -->
				





<script type="text/javascript">
var storeChgList = new Array();

//초기화 공통 sMethodName.init
function scoupon_init() {
	setInitStoreChg();
	storeChgList = new Array();
	$('#scouponNo').val('');
}

$(function() {
	//스토어 교환권 문자만 사용
	$("#scouponNo").megaBoxNumberCheck();

	//교환권 등록버튼 클릭
	$('#btn_reg_scoupon').on('click', function() {
		registStore();
	});

	//적용버튼 클릭
	$('#btn_apply_scoupon').on('click', function() {
		applyStoreChg();
	});

});

//스토어교환권 존재여부
function getInitStoreChgCnt() {
	return $('#layer_private_scoupon .table-wrap > table > tbody> tr').length;
}

//스토어교환권 초기화
function setInitStoreChg() {
	$('#layer_private_scoupon .table-wrap > table > tbody> tr').remove();
}

//스토어교환권 등록
function registStore() {
	//초기화
	var transNo     = $("#transNo").val();
	var scouponNo   = $("#scouponNo").val();

	//스토어교환권 자릿수 체크
	if (scouponNo.length != 16) {
		alert('스토어교환권 번호 16자리를  입력하세요.');	//스토어교환권 16자리를 입력하세요
		$("#scouponNo").focus();
		return;
	}

	//기 조회여부 체크
	for(var i=0;i<storeChgList.length;i++) {
		if (scouponNo.substring(0, 16) == storeChgList[i].cmbndNo) {
			alert('이미 조회 되었습니다.');
			return;
		}
	}

	var methodName = "scoupon";
	var paramData  = {scouponNo:scouponNo, methodName:methodName, cmbnd_type:'store' };
	$.ajax({
        url: "/on/oh/ohz/PayPrivate/registVcCmbnd.do",
        type: "POST",
        contentType: "application/json;charset=UTF-8",
        dataType: "json",
		data: JSON.stringify(paramData),
        success: function (data, textStatus, jqXHR) {
			if (data.resultStatus == 'Y') {
				addStoreChg(scouponNo.substring(0, 16));
			} else {
				gfn_alertMsgBox({ msg:'기명처리 불가한 교환권입니다.'});
			}
        },
        error: function(xhr,status,error){
        	var err = JSON.parse(xhr.responseText);
        	//err.statCd 에 따라서 이전화면으로 리턴 가능토록
        	gfn_alertMsgBox({ msg:err.msg});
        }
	});

}

//스토어교환권 추가
function addStoreChg(scouponNo) {
	//초기화
	var transNo     = $("#transNo").val();
	var paramData  = {transNo:transNo, cmbndNo:scouponNo };

	$.ajax({
        url: "/on/oh/ohz/PayPrivate/searchVcCmbnd.do",
        type: "POST",
        contentType: "application/json;charset=UTF-8",
        dataType: "json",
		data: JSON.stringify(paramData),
        success: function (data, textStatus, jqXHR) {
        	//쿠폰 전역변수 세팅
        	var vcCmbndList = data.vcCmbndList[0];

        	storeChgList.push(vcCmbndList);
        	var i = storeChgList.length-1;

    		cponListText = '<tr> ';
    		cponListText += '	<td class="a-l">'+storeChgList[i].cmbndNm+'</td> ';
    		cponListText += '	<td class="a-l"> ';
    		//cponListText += '		총(0/1) | 주간(0/1) | 월간(0/1)<br /> '; 현재 영어에서 제한횟수 관리가 되고 있지 않음. 추후 추가 필요
    		cponListText += '		'+String(storeChgList[i].validStartDe).maskDate()+'~'+String(storeChgList[i].validExprDe).maskDate()+' ';
    		cponListText += '	</td> ';
    		cponListText += '	<td><input type="radio" title="스토어권 사용" name="chkSCpon" idx="'+i+'" cponno="'+storeChgList[i].cmbndNo+'"/></td> ';
    		cponListText += '</tr> ';
    		$('#layer_private_scoupon .table-wrap > table > tbody').append(cponListText);

    		$('#scouponNo').val('');
        },
        error: function(xhr,status,error){
        	var err = JSON.parse(xhr.responseText);
        	//err.statCd 에 따라서 이전화면으로 리턴 가능토록
        	gfn_alertMsgBox({ msg:err.msg});
        }
	});
}


//스토어교환권 조회
function searchStoreChg() {
	//초기화
	var transNo     = $("#transNo").val();
	var paramData  = {transNo:transNo };

	$.ajax({
        url: "/on/oh/ohz/PayPrivate/searchVcCmbnd.do",
        type: "POST",
        contentType: "application/json;charset=UTF-8",
        dataType: "json",
		data: JSON.stringify(paramData),
        success: function (data, textStatus, jqXHR) {
        	//쿠폰 전역변수 세팅
        	storeChgList = data.vcCmbndList;

        	//쿠폰 목록 세팅
        	setStoreChg(storeChgList);
        },
        error: function(xhr,status,error){
        	var err = JSON.parse(xhr.responseText);
        	//err.statCd 에 따라서 이전화면으로 리턴 가능토록
        	gfn_alertMsgBox({ msg:err.msg });
        }
	});
}


//스토어교환권 목록 세팅
function setStoreChg(cponList) {
	setInitStoreChg();
	var cponListText = "";
	for(var i=0;i<cponList.length;i++) {

		cponListText = '<tr> ';
		cponListText += '	<td class="a-l">'+cponList[i].cmbndNm+'</td> ';
		cponListText += '	<td class="a-l"> ';
		//cponListText += '		총(0/1) | 주간(0/1) | 월간(0/1)<br /> '; 현재 영어에서 제한횟수 관리가 되고 있지 않음. 추후 추가 필요
		cponListText += '		'+String(cponList[i].validStartDe).maskDate()+'~'+String(cponList[i].validExprDe).maskDate()+' ';
		cponListText += '	</td> ';
		cponListText += '	<td><input type="radio" title="스토어권 사용" name="chkSCpon" idx="'+i+'" cponno="'+cponList[i].cmbndNo+'"/></td> ';
		cponListText += '</tr> ';

		$('#layer_private_scoupon .table-wrap > table > tbody').append(cponListText);
	}
}

//스토어교환권 적용
function applyStoreChg() {
	var transNo     = $("#transNo").val();
	var playSchdlNo = $("#playSchdlNo").val();
	var paramCpon   = new Array();
	var idx = $("input:radio[name='chkSCpon']:checked").index('[name="chkSCpon"]');

	if ( idx < 0 ) {
		gfn_alertMsgBox({ msg:'선택된 쿠폰 정보가 없습니다.'});
		return;
	}

	storeChgList[idx].transNo = transNo;
	paramCpon.push(storeChgList[idx]);

	var paramData = {transNo:transNo, cponList:paramCpon, playSchdlNo:playSchdlNo};
	$.ajax({
        url: "/on/oh/ohz/PayPrivate/applyVcCmbnd.do",
        type: "POST",
        contentType: "application/json;charset=UTF-8",
        dataType: "json",
		data: JSON.stringify(paramData),
        success: function (data, textStatus, jqXHR) {

        	if (data.returnMap.remainAmt > 0) {
        		gfn_alertMsgBox({ msg: '해당 관람권을 적용할 수 없습니다.' });
        		$('#layer_private_scoupon .close-layer').click();
        		return;
        	}

        	$('#layer_private_scoupon').hide();

        	//현금영수증 팝업여부
        	chkCshRec();
        },
        error: function(xhr,status,error){
        	var err = JSON.parse(xhr.responseText);
        	//err.statCd 에 따라서 이전화면으로 리턴 가능토록
        	gfn_alertMsgBox({ msg: err.msg });
        }
	});
}

</script>

<!-- 레이어 : 스토어교환권 -->
<section id="layer_private_scoupon" class="modal-layer">
	<div class="wrap">
		<header class="layer-header">
			<h3 class="tit">스토어교환권</h3>
		</header>

		<div class="layer-con">
			<div class="popup-gray mid-info-box mt0">
				<div class="pop-search-area">
					<p class="sh-txt reset"><span class="label">교환권번호</span></p>

					<div class="sh-input"><input type="text" title="스토어교환권 번호입력" class="input-text w200px" id="scouponNo" name="scouponNo" maxlength="16"></div>

					<div class="sh-btn gray">
						<button type="button" class="button small gray" id="btn_reg_scoupon">교환권등록</button>
					</div>
				</div>
			</div>

			<div class="table-wrap">
				<table class="board-list line">
					<caption>기프티콘 예매권을 예매권 명, 예매권번호, 사용 순서로 보여주는 표</caption>
					<colgroup>
						<col style="width:220px;">
						<col />
						<col style="width:60px;">
					</colgroup>
					<thead>
						<tr>
							<th scope="col">교환권 정보</th>
							<th scope="col">사용내역/유효기간</th>
							<th scope="col">사용</th>
						</tr>
					</thead>
					<tbody>
						<!--
						<tr>
							<td class="a-l">러브콤보패키지 러브콤보교환권</td>
							<td class="a-l">
								총(0/1) | 주간(0/1) | 월간(0/1)<br />
								/ 2019.03.25~2021.03.24
							</td>
							<td><input type="checkbox" title="아이넘버 1인권 사용여부 체크" /></td>
						</tr>
						<tr>
							<td class="a-l">러브콤보패키지 러브콤보교환권</td>
							<td class="a-l">
								총(0/1) | 주간(0/1) | 월간(0/1)<br />
								/ 2019.03.25~2021.03.24
							</td>
							<td><input type="checkbox" title="아이넘버 1인권 사용여부 체크" /></td>
						</tr>
						 -->
					</tbody>
				</table>
			</div>
		</div>

		<div class="btn-group-fixed">
			<button type="button" class="button close-layer">닫기</button>
			<button type="button" class="button purple" id="btn_apply_scoupon">결제</button>
		</div>

		<button type="button" class="btn-modal-close">레이어 닫기</button>
	</div>
</section>
<!-- 레이어 : 스토어교환권 -->

				<!-- 레이어 : 스토어 관람권 -->

                <!-- TODO 레이어 : 아너스카드 -->
                





<script type="text/javascript">
var annusChgInfo = new Object();

//초기화 공통 sMethodName.init
function annus_init() {  //아너스카드 전체초기화
	setInitAnnus();
	annusChgInfo = new Object();

	$('#annusCardNum').val('');
	$('#annusCardNum_hid').val('');
	$('#annusUseAbleAmt').text('0');
}

$(function() {

	//숫자만 입력가능
	$('#annusCardNum').megaBoxCardNumberCheck();

	//조회버튼 클릭
	$('#btn_select_annus').on('click', function() {
		searchAnnus();
	});

	//아너스카드 적용
	$('#btn_apply_annus').on('click', function() {
		applyAnnus();
	});

	//적용취소버튼 클릭
	$('#btn_cancel_apply_annus').on('click', function() {
		var sMethodName = "annus";
		cancelMbxSellCpInfo(sMethodName);

		//닫기버튼 클릭
     	$('#layer_annus_card .close-layer').click();
	});

	//닫기버튼 클릭
	$('#btn_close_annus, #btn_close_modal_annus').on('click', function() {
		if (!$('#btn_cancel_apply_annus').is(':visible')) {
			annus_init();
		}
	});
});


//아너스카드 초기화
function setInitAnnus() {
	$('#selAnnus > option').remove();
	$('#selAnnus').append('<option value="0">선택</option>');
}

//아너스카드 조회
function searchAnnus() {
	var transNo    = $("#transNo").val();
	var cardNo     = $("#annusCardNum_hid").val();

	//기존에 적용된 동일 수단이 있으면 초기화 후 재조회
	if ($('#btn_cancel_apply_annus').is(':visible')) {
		//이미 적용된 결제 수단은 재조회 할 수 없습니다. \\n[적용 취소]후 재조회 할 수 있습니다.
		gfn_alertMsgBox('이미 적용된 결제 수단은 재조회 할 수 없습니다. \n[적용 취소]후 재조회 할 수 있습니다.');
		return;
	}

	if (cardNo == "" || cardNo.length < 10) {
		gfn_alertMsgBox('카드 번호를 입력하세요.');
		return;
	}

	var paramData  = {transNo:transNo, cardNo:cardNo};


	$.ajax({
      url: "/on/oh/ohz/PayPrivate/searchAnnus.do",
      type: "POST",
      contentType: "application/json;charset=UTF-8",
      dataType: "json",
	  data: JSON.stringify(paramData),
      success: function (data, textStatus, jqXHR) {


      	//console.log(data);
    	if (!msgBookingLoginChk(data)) {
    		return;
    	}

      	//쿠폰 전역변수 세팅
      	annusChgInfo = data.annusInfo;

      	//쿠폰 목록 세팅
      	setAnnusChg(annusChgInfo);
      },
      error: function(xhr,status,error){
      	var err = JSON.parse(xhr.responseText);
      	//err.statCd 에 따라서 이전화면으로 리턴 가능토록
      	errBookingChk(err.msg);
      }
      , beforeSend : function() {
            $('#btn_select_annus').prop("disabled", true);
            $('#btn_select_annus').addClass('disabled');
  	  }
  	  , complete : function() {

            setTimeout(function(){
                $('#btn_select_annus').removeClass('disabled');
                $('#btn_select_annus').prop("disabled", false);
            },100);
  	  }

	});
}

//아너스카드 목록 세팅
function setAnnusChg(cponInfo) {
	setInitAnnus();
	var cponListText = "";

	$('#annusUseAbleAmt').text(String(cponInfo.useAbleAmt).maskNumber());

	var cponList = cponInfo.comboList;
	var useAmt   = 0;
	for(var i=0;i<cponList.length;i++) {
		useAmt += cponList[i].useAmt;
      	cponListText =  '<option value="'+cponList[i].useCnt+'">'+cponList[i].useCnt+'매'+' (-'+String(useAmt)+')</option>';
		$('#selAnnus').append(cponListText);
	}
}

//아너스카드 적용
function applyAnnus() {

	var transNo  = $("#transNo").val();
	var cardNo   = $("#annusCardNum_hid").val();
	var useCnt   = $('#selAnnus option:selected').val();




	if ( useCnt == 0 ) {
		//할인 적용할 매수를 선택하세요.
		gfn_alertMsgBox('할인 적용할 매수를 선택하세요.');
		return;
	}

	if (cardNo == "" || cardNo.length < 10) {
		gfn_alertMsgBox('카드 번호를 입력하세요.');
		return;
	}

	var paramData  = {transNo:transNo, cardNo:cardNo, useCnt:useCnt};

	$.ajax({
	  url: "/on/oh/ohz/PayPrivate/applyAnnus.do",
      type: "POST",
      contentType: "application/json;charset=UTF-8",
      dataType: "json",
	  data: JSON.stringify(paramData),
      success: function (data, textStatus, jqXHR) {
            //console.log(data);
            if (!msgBookingLoginChk(data)) {
                return;
            }


            //할인내역 갱신
            //setMovieDcInfo(data.policyList);

            /*
            $('#btn_cancel_annus').show(); //취소버튼
            $('#btn_cancel_apply_annus').show(); //적용취소버튼
            */
            //닫기버튼 클릭
            //$('#layer_annus_card .close-layer').click();
            $('#layer_annus_card').hide();

            //최종결제
            execPrivatePayment();

      },
      error: function(xhr,status,error){
      	var err = JSON.parse(xhr.responseText);
      	//err.statCd 에 따라서 이전화면으로 리턴 가능토록
      	errBookingChk(err.msg);
      }
	});
}
</script>

	<!-- 레이어 : 아너스카드 -->
	<input type="hidden" id="annusCardNum_hid"/>
	<section id="layer_private_annus" class="modal-layer">
		<div class="wrap">
			<header class="layer-header">
				<h3 class="tit">메가박스 아너스카드 <!-- 메가박스 아너스카드 --></h3>
			</header>

			<div class="layer-con">
				<div class="popup-gray mid-info-box mt0">
					<div class="pop-search-area">
						<p class="sh-txt reset mr08"><span class="label">카드번호 <!-- 카드번호 --></span></p>

						<div class="sh-input">
							<input type="text" title="메가박스 아너스카드 카드번호 입력 <!-- 메가박스 아너스카드 카드번호 입력 -->" class="input-text w200px" id="annusCardNum" maxlength="20" />
						</div>

						<div class="sh-btn gray">
							<button type="button" class="button small gray" id="btn_select_annus">조회 <!-- 조회 --></button>
						</div>
					</div>
				</div>

				<div class="table-wrap">
					<table class="board-form">
						<caption>메가박스 아너스카드를 본인 관람가, 동반자 관람단가, 월 제한수, 일 제한수, 주말가능, 관람가능일, 잔여금액 순서로 입력하는 표 <!-- 메가박스 아너스카드를 본인 관람가, 동반자 관람단가, 월 제한수, 일 제한수, 주말가능, 관람가능일, 잔여금액 순서로 입력하는 표 --></caption>
						<colgroup>
							<col style="width:125px;">
							<col>
							<col style="width:125px;">
							<col>
						</colgroup>
						<tbody>
							<tr>
								<th scope="row"><label for="selAnnus">적용매수 <!-- 본인 관람가 --></label></th>
								<td colspan="3">
									<select id="selAnnus" class="w150px x-small">
										<option>선택 <!-- 매수선택 --></option>
									</select>
								</td>
							</tr>
							<tr>
								<th scope="row">잔여금액 <!-- 잔여금액 --></th>
								<td colspan="3" id="annusUseAbleAmt"></td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>

			<div class="btn-group-fixed">
				<button type="button" class="button small close-layer" id="btn_close_annus">닫기 <!-- 닫기 --></button>
				
				<button type="button" class="button small purple" id="btn_apply_annus">결제 <!-- 적용 --></button>
			</div>

			<button type="button" class="btn-modal-close" id="btn_close_modal_annus">레이어 닫기 <!-- 레이어 닫기 --></button>
		</div>
	</section>
	<!-- 레이어 : 아너스카드 -->

                <!--// 레이어 : 아너스카드 -->

                <!-- 레이어 : 현금영수증 -->
				





<script type="text/javascript">


$(function() {

	//숫자만 입력가능
	$("#cashBillPhoneNo").megaBoxNumberCheck();

	//닫기 클릭 이벤트
	$('#btn_bill_close').on('click', function() {
		/*
		if ($('#cashBillPhoneNo').val().length < 10) {
			gfn_alertMsgBox('휴대폰 번호를 입력해 주세요.');	//휴대폰 번호를 입력해 주세요.
			$('#cashBillPhoneNo').focus();
			return false;
		}
		*/

		$('#cashBillYn').val('Y');
		$('#cashrecIssueCd').val('SELFPRN');	//자진발급

		//최종결제
		execPrivatePayment();
	});

	//즉시발급 클릭 이벤트
	$('#btn_bill_print').on('click', function() {
		var msg = "";
		if ($(":radio[name='bizmDivCd']:checked").val() == "PERSON") {
			msg = "휴대폰 번호를 입력해 주세요.";	//휴대폰 번호를 입력해 주세요.
		} else {
			msg = "사업자번호를 입력해 주세요.";	//사업자 번호를 입력해 주세요.
		}

		if ($('#cashBillPhoneNo').val() == "") {
			gfn_alertMsgBox(msg);
			$('#cashBillPhoneNo').focus();
			return false;
		}

		if ($(":radio[name='bizmDivCd']:checked").val() == "PERSON") {
			if ($('#cashBillPhoneNo').val().length < 10) {
				gfn_alertMsgBox("올바른 휴대폰 번호를 입력해 주세요.");
				$('#cashBillPhoneNo').focus();
				return false;
			}

		} else {
			if ($('#cashBillPhoneNo').val().length != 10) {
				gfn_alertMsgBox("올바른 사업자번호를 입력해 주세요.");
				$('#cashBillPhoneNo').focus();
				return false;
			}
		}


		$('#cashBillYn').val('Y');
		$('#cashrecIssueCd').val('GERNPRN');	//일반발급

		//최종결제
		execPrivatePayment();
	});

	//레이어 닫기 이벤트
	$('#btn_bill_layer_close').on('click', function() {
		/*
		if ($('#cashBillPhoneNo').val().length < 10) {
			gfn_alertMsgBox('휴대폰 번호를 입력해 주세요.');	//휴대폰 번호를 입력해 주세요.
			$('#cashBillPhoneNo').focus();
			return false;
		}
		*/

		$('#cashBillYn').val('Y');
		$('#cashrecIssueCd').val('SELFPRN');	//자진발급

		//최종결제
		execPrivatePayment();
	});
});


</script>
	<!-- 레이어 : 현금영수증 -->
	<section id="layer_cash_bill" class="modal-layer">
		<div class="wrap">
			<header class="layer-header">
				<h3 class="tit">현금영수증 발급 <!-- 현금영수증 발급 --></h3>
			</header>

			<div class="layer-con">
				<div class="pop-tit">
					현금영수증 발행을 위해 아래 정보를 입력해 주세요. <!-- 현금영수증 발행을 위해 아래 정보를 입력해 주세요.-->
				</div>

				<div class="popup-gray mid-info-box mb15">
					<div class="pop-search-area line-sht">
						<div class="pop-search-area-line ">
							<p class="sh-txt reset">금액 <!-- 금액 --></p>
							<strong id="cashBillAmt">12,000</strong>원 <!-- 원 -->
						</div>

						<div class="pop-search-area-line longline">
							<p class="sh-txt reset">거래구분 <!-- 거래구분 --></p>

							<div class="sh-input">
								<div>
									<span>
										<input type="radio" id="radio_cash_bill01" name="bizmDivCd" checked="checked" value="PERSON"/>
										<label for="radio_cash_bill01">개인소득공제용 <!-- 개인소득공제용 --></label>
									</span>

									<span class="ml20">
										<input type="radio" id="radio_cash_bill02" name="bizmDivCd" value="BIZM" />
										<label for="radio_cash_bill02">사업자증빙용 <!-- 사업자증빙용 --></label>
									</span>
								</div>

								<div class="mt05">

									<!-- 개인소득공제용 선택되었을때 -->
									<input type="text" title="휴대폰 번호 입력" class="input-text w200px" maxlength="20" id="cashBillPhoneNo" name="cashBillPhoneNo"><!-- 휴대폰 번호 입력 -->
									<span class="ml10">휴대폰 번호를 입력해 주세요. <!-- 휴대폰 번호를 입력해 주세요. --></span>

									<!--사업자증빙용 선택되었을때 -->
									<!--
									<input type="text" title="사업자 번호 입력" class="input-text w200px">
									<span class="ml10">사업자 번호를 입력해 주세요.</span>
									 -->
									<!-- //사업자증빙용 선택되었을때 -->
								</div>
							</div>

						</div>
					</div>
				</div>
			</div>

			<div class="btn-group-fixed">
				<button type="button" class="button small close-layer" id="btn_bill_close">자진발급 <!-- 자진발급 --></button>
				<button type="button" class="button small purple close-layer" id="btn_bill_print">즉시발급 <!-- 즉시발급 --></button>
			</div>

			<button type="button" class="btn-modal-close" id="btn_bill_layer_close">레이어 닫기 <!-- 레이어 닫기 --></button>
		</div>
	</section>
	<!--// 레이어 : 현금영수증 -->


				<!--// 레이어 : 현금영수증 -->









				<div class="box-border v1">
					<p class="tit">유의사항</p>

					<ul class="dot-list">
						<li>최대 8명까지 이용할 수 있으며, 선택한 시간에 정시 입장 가능합니다.</li>
						<li>더 부티크 프라이빗 전용 라운지는 영화시간을 포함하여 최대 3시간 동안 이용할 수 있습니다.</li>
						<li>선택한 영화의 러닝타임이 120분 이상일 경우 라운지 이용시간이 조정될 수 있습니다.</li>
						<li>영화시작 시간은 입장 후 1시간 이내에 자유롭게 선택할 수 있습니다.</li>
						<li>더 부티크 프라이빗은 대관 형식의 특별관으로 멤버십 포인트 적립 및 사용이 불가합니다.</li>
						<li>초대할 분들이 지연 입장하지 않도록 유의하시기 바랍니다.</li>
						<li>당일 예매 및 환불은 불가합니다. (상영일 하루 전까지 환불 가능)</li>
						<li>예매 문의: 070-8996-0224 (월~ 금│AM 10:00~PM 7:00, 공휴일 제외)</li>
					</ul>
				</div>
				<a href="#layer_cash_bill" title="현금영수증 보기" w-data="600" h-data="400" class="button active btn-modal-open target" id="cash_pop" style="display:none;">현금영수증<!-- 현금영수증 --></a>
			</div>
		</div>
		<!--content:End -->
	</div>
	<!--// contents -->
</div>
<!--// container -->
<form id="seatViewForm">
	<input type="hidden" id="seatViewFormPlaySchdlNo" name="playSchdlNo" value=""/>
	<input type="hidden" id="movieNo" name="movieNo" value=""/>
	<input type="hidden" id="transNo" name="transNo" value=""/>
	<input type="hidden" id="completeTransNo"  name="completeTransNo"  value=""/>
	<input type="hidden" name="cashBillYn"     id="cashBillYn"    	value=""/>
	<input type="hidden" name="cashrecIssueCd" id="cashrecIssueCd"  value=""/>
	<input type="hidden" id="lastPayMethod" name="lastPayMethod" value=""/>
	<input type="hidden" id="returnUrl" name="returnUrl" value=""/>
</form>

<input type="hidden" id="todayDate" name="todayDate" value=""/>
<input type="hidden" id="movieGrade" name="movieGrade" value=""/>

<form name="ifrm" method="POST" target="FD_PAY_FRAME" action="https://www.megabox.co.kr/on/oh/ohz/PayPrivate/applyCreditCard.do" >
    <input type = "hidden"  name="transNo"    id="ifrm_transNo"      />
    <input type = "hidden"  name="useAmt"     id="ifrm_useAmt"       />
</form>﻿


<!-- 		</div> -->
        



<section id="saw_movie_regi" class="modal-layer">
	<input type="hidden" id="isLogin"   />
	<div class="wrap">
		<header class="layer-header">
			<h3 class="tit">본 영화 등록</h3>
		</header>

		<div class="layer-con">
			<p class="reset">발권하신 티켓 하단의 거래번호 또는 예매번호를 입력해주세요.</p>

			<div class="pop-gray mt10 mb30">
				<label for="movie_regi" class="mr10">거래번호 또는 예매번호</label>
				<input type="text" id="movie_regi" class="input-text w280px numType" maxlength="20" placeholder="숫자만 입력해 주세요" title="티켓 거래번호 입력" />
				<button class="button gray ml05" id="regBtn">등록</button>
			</div>

			<div class="box-border v1 mt30">
				<p class="tit-box">이용안내</p>

				<ul class="dot-list">
                        <li>극장에서 예매하신 내역을 본 영화(관람이력)로 등록하실 수 있습니다.</li>
                        <li>예매처를 통해 예매하신 고객님은 극장에서 발권하신 티켓 하단의 온라인 예매번호 <BR>12자리를 입력해주세요.(Yes24, 네이버, 맥스무비, 인터파크, SKT, KT, 다음)</li>
                        <li>본 영화 등록은 관람인원수 만큼 등록가능하며, 동일 계정에 중복등록은 불가합니다.</li>
                        <li>상영시간 종료 이후 등록 가능합니다.</li>
                        <li>본 영화로 수동 등록한 내역은 이벤트 참여 및 포인트 추후 적립이 불가합니다.</li>
				</ul>
			</div>
		</div>

		<div class="btn-group-fixed">
			<button type="button" class="button purple close-layer">닫기</button>
		</div>

		<button type="button" class="btn-modal-close">레이어 닫기</button>
	</div>
</section>

<div class="quick-area">
	<a href="#" class="btn-go-top" title="top">top</a>
</div>

<!-- footer -->
<footer id="footer">
    <!-- footer-top -->
    <div class="footer-top">
        <div class="inner-wrap">
            <ul class="fnb">
                <li><a href="../megaboxinfo.html" title="회사소개 페이지로 이동">회사소개</a></li>
                <li><a href="../recruit.html" title="인재채용 페이지로 이동">인재채용</a></li>
                <li><a href="../socialcontribution.html" title="사회공헌 페이지로 이동">사회공헌</a></li>
                <li><a href="../partner.html" title="제휴/광고/부대사업문의 페이지로 이동">제휴/광고/부대사업문의</a></li>
                <li><a href="../support/terms.html" title="이용약관 페이지로 이동">이용약관</a></li>
                <li class="privacy"><a href="../support/privacy.html" title="개인정보처리방침 페이지로 이동">개인정보처리방침</a></li>
                <li><a href="https://jebo.joonganggroup.com/main.do" target="_blank" title="윤리경영 페이지로 이동">윤리경영</a></li>
            </ul>

            <a href="#layer_looking_theater" class="btn-looking-theater" title="극장찾기"><i class="iconset ico-footer-search"></i> 극장찾기</a>
        </div>
    </div>
    <!--// footer-top -->

    <!-- footer-bottom -->
    <div class="footer-bottom">
        <div class="inner-wrap">
            <div class="ci">MEGABOX : Life Theater</div>

            <div class="footer-info">
                <div>
                    <address>서울특별시 성동구 왕십리로 50, 6층(성수동 1가, 메가박스스퀘어)</address>
                    <p>ARS 1544-0070</p>
                </div>
                <p>대표자명 김진선</p>
                <p>&middot; 개인정보보호책임자 조상연</p>
                <p>&middot; 사업자등록번호 211-86-59478</p>
                <p>&middot; 통신판매업신고번호 제 833호</p>
                <p class="copy">COPYRIGHT &copy; MegaboxJoongAng, Inc. All rights reserved</p>
            </div>

            <div class="footer-sns">
                <a href="https://twitter.com/megaboxon" target="_blank" title="MEGABOX 트위터 페이지로 이동"><i class="iconset ico-twitter">트위터</i></a>
                <a href="https://www.facebook.com/megaboxon" target="_blank" title="MEGABOX 페이스북 페이지로 이동"><i class="iconset ico-facebook">페이스북</i></a>
                <a href="http://instagram.com/megaboxon" target="_blank" title="MEGABOX 인스타그램 페이지로 이동"><i class="iconset ico-instagram">인스타그램</i></a>
                <a href="https://play.google.com/store/apps/details?id=com.megabox.mop" target="_blank" title="MEGABOX 구글플레이 페이지로 이동"><i class="iconset ico-googleplay">구글플레이</i></a>
                <a href="https://itunes.apple.com/kr/app/megabox/id894443858?l=ko&amp;ls=1&amp;mt=8" target="_blank" title="MEGABOX 앱스토어 페이지로 이동"><i class="iconset ico-appstore">앱스토어</i></a>
            </div>
        </div>
    </div>
    <!--// footer-bottom -->
    <div id="layer_looking_theater" class="layer-looking-theater"></div>
</footer>
<!--// footer -->

<!-- 모바일 때만 출력 -->
<div class="go-mobile">
	<a href="#" data-url="https://m.megabox.co.kr/">모바일웹으로 보기 <i class="iconset ico-go-mobile"></i></a>
</div>
    </div>
    <form id="mainForm">
    </form>
    <script type="text/javascript">
		(function(w, d, a){
		    w.__beusablerumclient__ = {
		        load : function(src){
		            var b = d.createElement("script");
		            b.src = src; b.async=true; b.type = "text/javascript";
		            d.getElementsByTagName("head")[0].appendChild(b);
		        }
		    };w.__beusablerumclient__.load(a);
		})(window, document, "//rum.beusable.net/script/b200617e104748u388/bc4af2fa1e");
	</script>
</body>

<!-- Mirrored from www.megabox.co.kr/booking/privatebooking by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 07 Jul 2020 06:34:33 GMT -->
</html>